var Movai=function(t){var n={};function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(n){return t[n]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n,e){"use strict";var i=e(3);function r(t){this.message=t}r.prototype=new Error,r.prototype.name="InvalidTokenError",t.exports=function(t,n){if("string"!=typeof t)throw new r("Invalid token specified");var e=!0===(n=n||{}).header?0:1;try{return JSON.parse(i(t.split(".")[e]))}catch(t){throw new r("Invalid token specified: "+t.message)}},t.exports.InvalidTokenError=r},function(t,n,e){var i,r;
/**
 * Monet.js 0.9.0-rc.1
 *
 * (c) 2012-2018 Chris Myers
 * @license Monet.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * https://monet.github.io/monet.js/
 */"undefined"!=typeof self&&self,void 0===(r="function"==typeof(i=function(){"use strict";var t={apply2:E,assign:S(Object.assign)?Object.assign:function(t,n){for(var e in n)n.hasOwnProperty(e)&&void 0!==n[e]&&(t[e]=n[e]);return t},compose:w,curry:b(_(b),[])([]),idFunction:k,isFunction:S,noop:y,swap:_},n="@@type",e="monet.js",i="Identity",r="Maybe",o="Either",u="Validation",s="List",a="NEL",c="IO",f="MonadT",h="Reader",l="Free";function p(t,i){t[n]=e+"/"+i}function d(t){return function(i){return i[n]||i.constructor[n]===e+"/"+t}}function v(t){return function(e){var i=e[n]||e.constructor&&e.constructor[n];return Boolean(i)&&i.length>=t.length&&i.indexOf(t)===i.length-t.length}}function m(t){return null==t}function y(){}function g(t){return Array.prototype.slice.call(t)}function b(t,n){return function(){var e=n.concat(g(arguments));return e.length>=t.length?t.apply(null,e.slice(0,e.length)):b(t,e)}}function w(t,n){return function(e){return t(n(e))}}function S(t){return Boolean(t&&t.constructor&&t.call&&t.apply)}function k(t){return t}function L(t,n){return t===n||t!=t&&n!=n||!(!t||!n)&&!(!S(t.equals)||!S(n.equals))&&t.equals(n)}function N(t){return function(n){return L(t,n)}}function T(){return!1}function _(t){return function(n,e){return t(e,n)}}function E(t,n,e){return n.ap(t.map(b(e,[])))}function O(t,n){for(var e=t,i=n;!e.isNil&&!i.isNil;){if(!N(e.head())(i.head()))return!1;e=e.tail(),i=i.tail()}return e.isNil&&i.isNil}function I(t,n){return function t(n,e){return e.isNil?ot(e):rt((function(){return t(n,e.tail())})).map(b(x,[])(n(e.head())))}(t,n).run()}function R(t,n){return t.foldRight(P)((function(t,e){return n(t)?x(t,e):e}))}function A(t,n){return function t(n,e){if(n.isNil)return ot(G());var i=n.head();return e(i)?ot(W(i)):rt((function(){return t(n.tail(),e)}))}(t,n).run()}function M(t,n){return function t(n,e){return n.isNil?ot(!1):L(n.head(),e)?ot(!0):rt((function(){return t(n.tail(),e)}))}(t,n).run()}function x(t,n){return n.cons(t)}function j(){switch(arguments.length){case 0:return new j.fn.init;case 1:return new j.fn.init(arguments[0]);default:return new j.fn.init(arguments[0],arguments[1])}}t.List=j;var P,V=function(t,n){n.isNil||(t(n.head()),V(t,n.tail()))},C=function(t,n,e){return function n(e,i){return i.isNil?ot(e):rt((function(){return n(t(e,i.head()),i.tail())}))}(n,e).run()},F=function(t,n,e){return function n(e,i){return e.isNil?ot(i):rt((function(){return n(e.tail(),i)})).map((function(n){return t(e.head(),n)}))}(n,e).run()},J=function(t,n){return function t(n,e){return n.isNil?ot(e):rt((function(){return t(n.tail(),e).map((function(t){return t.cons(n.head())}))}))}(t,n).run()},z=function(t,n){return t.foldRight(n.of(P))(n.map2(x))},q=function(t){return t.foldLeft(P)(_(x))};function B(t){return new Error("Cannot create an empty Non-Empty List. Passed head is "+t+".")}function U(t,n){if(m(t))throw B(t);return new U.fn.init(t,n)}j.fn=j.prototype={init:function(){var t=arguments[0],n=arguments[1];0===arguments.length?(this.isNil=!0,this.size_=0):(this.isNil=!1,this.head_=t,this.tail_=n||P,this.size_=this.tail_.size()+1),p(this,s)},of:function(t){return new j(t)},size:function(){return this.size_},equals:function(t){return(j.isOfType(t)||U.isOfType(t))&&O(this,t)},cons:function(t){return j(t,this)},snoc:function(t){return this.concat(j(t))},map:function(t){return I(t,this)},toArray:function(){return C((function(t,n){return t.push(n),t}),[],this)},toSet:function(){return new Set(this)},foldLeft:function(t){var n=this;return function(e){return C(e,t,n)}},foldRight:function(t){var n=this;return function(e){return F(e,n,t)}},append:function(t){return J(this,t)},filter:function(t){return R(this,t)},find:function(t){return A(this,t)},flatten:function(){return F(J,this,P)},flattenMaybe:function(){return this.flatMap(D.toList)},reverse:function(){return q(this)},bind:function(t){return this.map(t).flatten()},forEach:function(t){V(t,this)},contains:function(t){return M(this,t)},sequenceMaybe:function(){return z(this,D)},sequenceValidation:function(){return this.foldLeft(K(P))((function(t,n){return t.ap(n.map((function(t){return function(n){return x(t,n)}})))})).map(q)},sequenceEither:function(){return z(this,$)},sequenceIO:function(){return z(this,Z)},sequenceReader:function(){return z(this,et)},sequence:function(t){return z(this,t)},head:function(){return this.head_},headMaybe:function(){return this.isNil?G():W(this.head_)},tail:function(){return this.isNil?P:this.tail_},tails:function(){return this.isNil?j(P,P):this.tail().tails().cons(this)},ap:function(t){return n=t,this.bind((function(t){return n.map((function(n){return n(t)}))}));var n},isNEL:T,toString:function(){return this.isNil?"Nil":"List("+this.toArray().join(", ")+")"},inspect:function(){return this.toString()}},j.fn.init.prototype=j.fn,p(j,s),p(j.fn.init,s),j.isInstance=d(s),j.isOfType=v(s),j.prototype.empty=function(){return P},j.fromArray=function(t){return t.reduceRight((function(t,n){return t.cons(n)}),P)},j.from=function(t){return j.fromArray(Array.from(t))},j.of=function(t){return new j(t,P)},j.prototype.each=j.prototype.forEach,P=t.Nil=new j.fn.init,t.NEL=t.NonEmptyList=U,U.of=function(t){return U(t,P)},U.fn=U.prototype={init:function(t,n){if(m(t))throw B(t);this.isNil=!1,this.head_=t,this.tail_=m(n)?P:n,this.size_=this.tail_.size()+1,p(this,a)},equals:function(t){return j.isOfType(t)||U.isOfType(t)&&O(this,t)},cons:function(t){return U(t,this.toList())},snoc:function(t){return this.concat(U(t))},map:function(t){return U(t(this.head_),I(t,this.tail_))},bind:function(t){var n=t(this.head_);if(!n.isNEL())throw new Error("NEL.fn.bind: Passed function must return a NonEmptyList.");var e=this.tail().foldLeft(P.snoc(n.head()).append(n.tail()))((function(n,e){var i=t(e).toList();return n.snoc(i.head()).append(i.tail())}));return new U(e.head(),e.tail())},head:function(){return this.head_},tail:function(){return this.tail_},tails:function(){var t=this.toList().tails().map(U.fromList).flattenMaybe();return U(t.head(),t.tail())},toList:function(){return j(this.head_,this.tail_)},reverse:function(){if(this.tail().isNil)return this;var t=this.tail().reverse();return U(t.head(),t.tail().append(j(this.head())))},foldLeft:function(t){return this.toList().foldLeft(t)},foldRight:function(t){return this.toList().foldRight(t)},reduceLeft:function(t){return this.tail().foldLeft(this.head())(t)},filter:function(t){return R(this.toList(),t)},find:function(t){return A(this.toList(),t)},flatten:function(){return F(J,this.toList().map((function(t){return t.isNEL()?t.toList():t})),P)},flattenMaybe:function(){return this.toList().flatMap(D.toList)},contains:function(t){return M(this.toList(),t)},append:function(t){return U.fromList(this.toList().append(t.toList())).some()},cobind:function(t){return this.cojoin().map(t)},size:function(){return this.size_},forEach:function(t){return this.toList().forEach(t)},isNEL:function(){return!0},toString:function(){return"NEL("+this.toArray().join(", ")+")"},inspect:function(){return this.toString()}},U.fromList=function(t){return t.isNil?G():W(U(t.head(),t.tail()))},U.fromArray=function(t){return U.fromList(j.fromArray(t))},U.from=function(t){return U.fromList(j.from(t))},U.fn.init.prototype=U.fn,p(U,a),p(U.fn.init,a),U.isInstance=d(a),U.isOfType=v(a),U.prototype.toArray=j.prototype.toArray,U.prototype.toSet=j.prototype.toSet,U.prototype.extract=U.prototype.copure=U.prototype.head,U.prototype.cojoin=U.prototype.tails,U.prototype.coflatMap=U.prototype.mapTails=U.prototype.cobind,U.prototype.ap=j.prototype.ap;var D=t.Maybe={};D.fromFalsy=function(t){return t?D.Some(t):D.None()},D.fromNull=function(t){return m(t)?D.None():D.Some(t)},D.fromUndefined=function(t){return void 0===t?D.None():D.Some(t)},D.of=function(t){return W(t)};var W=D.Just=D.Some=D.some=t.Some=t.Just=function(t){return new D.fn.init(!0,t)},G=D.Nothing=D.None=D.none=t.None=t.Nothing=function(){return new D.fn.init(!1,null)};D.toList=function(t){return t.toList()},D.fn=D.prototype={init:function(t,n){if(this.isValue=t,t&&m(n))throw new Error("Can not create Some with illegal value: "+n+".");this.val=n,p(this,r)},isSome:function(){return this.isValue},isNone:function(){return!this.isSome()},bind:function(t){return this.isValue?t(this.val):this},some:function(){if(this.isValue)return this.val;throw new Error("Cannot call .some() on a None.")},orSome:function(t){return this.isValue?this.val:t},orLazy:function(t){return this.cata(t,k)},orNull:function(){return this.orSome(null)},orUndefined:function(){return this.orSome(void 0)},orElse:function(t){return this.catchMap((function(){return t}))},ap:function(t){var n=this.val;return this.isValue?t.map((function(t){return t(n)})):this},equals:function(t){return D.isOfType(t)&&this.cata((function(){return t.isNone()}),(function(n){return t.fold(!1)(N(n))}))},toArray:function(){return this.map((function(t){return[t]})).orLazy((function(){return[]}))},toSet:function(){return new Set(this)},toList:function(){return this.map(j).orLazy((function(){return P}))},toEither:function(t){return this.isSome()?tt(this.val):nt(t)},toValidation:function(t){return this.isSome()?K(this.val):Q(t)},fold:function(t){var n=this;return function(e){return n.isSome()?e(n.val):t}},foldLeft:function(t){return this.toList().foldLeft(t)},foldRight:function(t){return this.toList().foldRight(t)},cata:function(t,n){return this.isSome()?n(this.val):t()},catchMap:function(t){return this.isSome()?this:t()},filter:function(t){var n=this;return n.flatMap((function(e){return t(e)?n:G()}))},orNoneIf:function(t){return t?G():this},contains:function(t){return!!this.isSome()&&L(this.val,t)},forEach:function(t){this.cata(y,t)},orElseRun:function(t){this.cata(t,y)},toString:function(){return this.isSome()?"Just("+this.val+")":"Nothing"},inspect:function(){return this.toString()}},D.prototype.orJust=D.prototype.getOrElse=D.prototype.orSome,D.prototype.just=D.prototype.some,D.prototype.isJust=D.prototype.isSome,D.prototype.isNothing=D.prototype.isNone,D.prototype.orNothingIf=D.prototype.orNoneIf,D.fn.init.prototype=D.fn,p(D,r),p(D.fn.init,r),D.isInstance=d(r),D.isOfType=v(r);var H=t.Validation={},K=H.Success=H.success=t.Success=function(t){return new H.fn.init(t,!0)},Q=H.Fail=H.fail=t.Fail=function(t){return new H.fn.init(t,!1)};H.of=function(t){return K(t)},H.fn=H.prototype={init:function(t,n){this.val=t,this.isSuccessValue=n,p(this,u)},success:function(){if(this.isSuccess())return this.val;throw new Error("Cannot call success() on a Fail.")},isSuccess:function(){return this.isSuccessValue},isFail:function(){return!this.isSuccessValue},fail:function(){if(this.isSuccess())throw new Error("Cannot call fail() on a Success.");return this.val},bind:function(t){return this.isSuccess()?t(this.val):this},ap:function(t){var n=this.val;return this.isSuccess()?t.map((function(t){return t(n)})):t.isFail()?H.Fail(X.append(n,t.fail())):this},acc:function(){var t=function(){return t};return this.isSuccessValue?H.success(t):this},foldLeft:function(t){return this.toMaybe().toList().foldLeft(t)},foldRight:function(t){return this.toMaybe().toList().foldRight(t)},cata:function(t,n){return this.isSuccessValue?n(this.val):t(this.val)},catchMap:function(t){return this.isSuccess()?this:t(this.val)},swap:function(){return this.isSuccess()?Q(this.val):K(this.val)},failMap:function(t){return this.isFail()?Q(t(this.val)):this},bimap:function(t,n){return this.isSuccessValue?this.map(n):this.failMap(t)},forEach:function(t){this.cata(y,t)},forEachFail:function(t){this.cata(t,y)},equals:function(t){return H.isOfType(t)&&this.cata((function(n){return t.cata(N(n),T)}),(function(n){return t.cata(T,N(n))}))},toMaybe:function(){return this.isSuccess()?W(this.val):G()},toEither:function(){return(this.isSuccess()?tt:nt)(this.val)},toString:function(){return(this.isSuccess()?"Success(":"Fail(")+this.val+")"},inspect:function(){return this.toString()}},H.prototype.fold=H.prototype.cata,H.fn.init.prototype=H.fn,p(H,u),p(H.fn.init,u),H.isInstance=d(u),H.isOfType=v(u);var X=t.Semigroup={append:function(t,n){if(S(t.concat))return t.concat(n);throw new Error("Couldn't find a semigroup appender in the environment, please specify your own append function")}},Y=t.monadTransformer=t.MonadT=t.monadT=function(t){return new Y.fn.init(t)};Y.of=function(t){return Y(t)},Y.fn=Y.prototype={init:function(t){this.monad=t,p(H,f)},map:function(t){return Y(this.monad.map((function(n){return n.map(t)})))},bind:function(t){return Y(this.monad.map((function(n){return n.flatMap(t)})))},ap:function(t){return Y(this.monad.flatMap((function(n){return t.perform().map((function(t){return n.ap(t)}))})))},perform:function(){return this.monad}},Y.fn.init.prototype=Y.fn;var Z=t.IO=t.io=function(t){return new Z.fn.init(t)};Z.of=function(t){return Z((function(){return t}))},Z.fn=Z.prototype={init:function(t){if(!S(t))throw new Error("IO requires a function.");this.effectFn=t,p(H,c)},map:function(t){var n=this;return Z((function(){return t(n.effectFn())}))},bind:function(t){var n=this;return Z((function(){return t(n.effectFn()).run()}))},ap:function(t){var n=this;return t.map((function(t){return t(n.effectFn())}))},run:function(){return this.effectFn()}},Z.fn.init.prototype=Z.fn,p(Z,c),p(Z.fn.init,c),Z.isInstance=d(c),Z.isOfType=v(c),Z.prototype.perform=Z.prototype.performUnsafeIO=Z.prototype.run;var $=t.Either={};$.of=function(t){return tt(t)};var tt=$.Right=$.right=t.Right=function(t){return new $.fn.init(t,!0)},nt=$.Left=$.left=t.Left=function(t){return new $.fn.init(t,!1)};$.fn=$.prototype={init:function(t,n){this.isRightValue=n,this.value=t,p(this,o)},bind:function(t){return this.isRightValue?t(this.value):this},ap:function(t){var n=this;return this.isRightValue?t.map((function(t){return t(n.value)})):this},leftMap:function(t){return this.isLeft()?nt(t(this.value)):this},isRight:function(){return this.isRightValue},isLeft:function(){return!this.isRight()},right:function(){if(this.isRightValue)return this.value;throw new Error("Cannot call right() on a Left.")},left:function(){if(this.isRightValue)throw new Error("Cannot call left() on a Right.");return this.value},foldLeft:function(t){return this.toMaybe().toList().foldLeft(t)},foldRight:function(t){return this.toMaybe().toList().foldRight(t)},cata:function(t,n){return this.isRightValue?n(this.value):t(this.value)},catchMap:function(t){return this.isRight()?this:t(this.value)},swap:function(){return this.isRight()?nt(this.value):tt(this.value)},forEach:function(t){this.cata(y,t)},forEachLeft:function(t){this.cata(t,y)},equals:function(t){return $.isOfType(t)&&this.cata((function(n){return t.cata(N(n),T)}),(function(n){return t.cata(T,N(n))}))},bimap:function(t,n){return this.isRightValue?this.map(n):this.leftMap(t)},toMaybe:function(){return this.isRight()?W(this.value):G()},toValidation:function(){return this.isRight()?K(this.value):Q(this.value)},toString:function(){return this.cata((function(t){return"Left("+t+")"}),(function(t){return"Right("+t+")"}))},inspect:function(){return this.toString()}},$.prototype.fold=$.prototype.cata,$.fn.init.prototype=$.fn,p($,o),p($.fn.init,o),$.isInstance=d(o),$.isOfType=v(o);var et=t.Reader=function(t){return new et.fn.init(t)};et.of=function(t){return et((function(n){return t}))},et.ask=function(){return et(k)},et.fn=et.prototype={init:function(t){this.f=t,p(this,h)},run:function(t){return this.f(t)},bind:function(t){var n=this;return et((function(e){return t(n.run(e)).run(e)}))},ap:function(t){var n=this;return t.bind((function(t){return et((function(e){return t(n.run(e))}))}))},map:function(t){var n=this;return et((function(e){return t(n.run(e))}))},local:function(t){var n=this;return et((function(e){return n.run(t(e))}))}},et.fn.init.prototype=et.fn,p(et,h),p(et.fn.init,h),et.isInstance=d(h),et.isOfType=v(h);var it=t.Free={},rt=it.Suspend=t.Suspend=function(t){return new it.fn.init(t,!0)},ot=it.Return=t.Return=function(t){return new it.fn.init(t,!1)};function ut(t){return new ut.fn.init(t)}function st(t){!function(t){t.prototype.flatMap=t.prototype.chain=t.prototype.bind,t.pure=t.unit=t.of,t.prototype.of=t.of,S(t.prototype.append)&&(t.prototype.concat=t.prototype.append),t.prototype.point=t.prototype.pure=t.prototype.unit=t.prototype.of}(t),function(t){S(t.prototype.filter)&&(t.prototype.filterNot=function(t){return this.filter((function(n){return!t(n)}))})}(t),function(t){t.prototype.join=function(){return this.flatMap(k)},t.map2=function(t){return function(n,e){return n.flatMap((function(n){return e.map((function(e){return t(n,e)}))}))}}}(t),function(t){S(t.prototype.map)||(t.prototype.map=function(t){return this.bind(w(this.of,t))})}(t),function(t){t.prototype.takeLeft=function(t){return E(this,t,(function(t,n){return t}))},t.prototype.takeRight=function(t){return E(this,t,(function(t,n){return n}))}}(t),function(t){S(t.prototype.toArray)&&(t.prototype.every=t.prototype.forall=function(t){return this.toArray().every(t)},t.prototype.exists=function(t){return this.toArray().some(t)})}(t),function(t){["equals","map","ap","chain"].filter((function(n){return S(t.prototype[n])})).forEach((function(n){t.prototype["fantasy-land/"+n]=t.prototype[n]}))}(t),function(t){S(t.prototype.toArray)&&(t.prototype[Symbol.iterator]=function(){return this.toArray()[Symbol.iterator]()})}(t),function(t){S(t.prototype.toArray)&&(t.prototype.to=function(t){return t(this)})}(t)}return it.of=function(t){return ot(t)},it.liftF=function(t){return S(t)?rt(w(ot,t)):rt(t.map(ot))},it.fn=it.prototype={init:function(t,n){this.isSuspend=n,n?this.functor=t:this.val=t,p(this,l)},run:function(){return this.go((function(t){return t()}))},bind:function(t){return this.isSuspend?S(this.functor)?rt(w((function(n){return n.bind(t)}),this.functor)):rt(this.functor.map((function(n){return n.bind(t)}))):t(this.val)},ap:function(t){return this.bind((function(n){return t.map((function(t){return t(n)}))}))},resume:function(){return this.isSuspend?nt(this.functor):tt(this.val)},go1:function(t){return function n(e){return e.resume().cata((function(e){return n(t(e))}),k)}(this)},go:function(t){for(var n=this.resume();n.isLeft();){var e=t(n.left());n=e.resume()}return n.right()}},it.fn.init.prototype=it.fn,p(it,l),p(it.fn.init,l),it.isInstance=d(l),it.isOfType=v(l),t.Identity=ut,ut.of=function(t){return new ut(t)},ut.fn=ut.prototype={init:function(t){this.val=t,p(this,i)},bind:function(t){return t(this.val)},get:function(){return this.val},forEach:function(t){t(this.val)},equals:function(t){return ut.isOfType(t)&&N(this.get())(t.get())},contains:function(t){return L(this.val,t)},toString:function(){return"Identity("+this.val+")"},inspect:function(){return this.toString()},ap:function(t){var n=this.val;return t.map((function(t){return t(n)}))},toArray:function(){return[this.get()]},toList:function(){return j(this.get(),P)},toSet:function(){return new Set(this)}},ut.fn.init.prototype=ut.fn,p(ut,i),p(ut.fn.init,i),ut.isInstance=d(i),ut.isOfType=v(i),st(Y),st($),st(D),st(Z),st(U),st(j),st(H),st(et),st(it),st(ut),t})?i.call(n,e,n,t):i)||(t.exports=r)},function(t,n,e){t.exports=e(5)},function(t,n,e){var i=e(4);t.exports=function(t){var n=t.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(i(t).replace(/(.)/g,(function(t,n){var e=n.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e})))}(n)}catch(t){return i(n)}}},function(t,n){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(t){this.message=t}i.prototype=new Error,i.prototype.name="InvalidCharacterError",t.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var n=String(t).replace(/=+$/,"");if(n.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,u=0,s=0,a="";o=n.charAt(s++);~o&&(r=u%4?64*r+o:o,u++%4)?a+=String.fromCharCode(255&r>>(-2*u&6)):0)o=e.indexOf(o);return a}},function(t,n,e){"use strict";e.r(n);var i=e(0),r=e.n(i),o={AuthException:function(t){this.message=t,this.name="AuthException"},getToken:function(){var t=window.localStorage.getItem("movai.token");return t||!1},getRefreshToken:function(){var t=window.localStorage.getItem("movai.refreshToken");return t||!1},getTokenData:function(){var t=getToken();return{message:r()(t).message,auth_token:!1,refresh_token:getRefreshToken(),error:!1,access_token:t}},login:function(t,n,e){var i,r,o,u,s;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return window.localStorage.removeItem("movai.token"),window.localStorage.removeItem("movai.refreshToken"),window.localStorage.removeItem("movai.tokenRemember"),window.sessionStorage.removeItem("movai.session"),(i={})["Content-Type"]="application/json",r="".concat("http://localhost:5004","/token-auth/"),a.prev=7,a.next=10,regeneratorRuntime.awrap(fetch(r,{method:"POST",headers:i,body:JSON.stringify({username:t,password:n,remember:e})}));case 10:return o=a.sent,u=o.status,a.next=14,regeneratorRuntime.awrap(o.json());case 14:return s=a.sent,200===u&&(window.localStorage.setItem("movai.token",s.access_token),window.localStorage.setItem("movai.refreshToken",s.refresh_token),window.localStorage.setItem("movai.tokenRemember","undefined"!=e&&e),window.sessionStorage.setItem("movai.session",!0)),a.abrupt("return",s);case 19:throw a.prev=19,a.t0=a.catch(7),a.t0;case 22:case"end":return a.stop()}}),null,null,[[7,19]])},logout:function(){window.localStorage.removeItem("movai.token"),window.localStorage.removeItem("movai.refreshToken"),window.localStorage.removeItem("movai.tokenRemember"),window.sessionStorage.removeItem("movai.session")},checkLogin:function(){var t,n,e,i,o,u,s,a,c,f;return regeneratorRuntime.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(t=window.localStorage.getItem("movai.token"),n=window.localStorage.getItem("movai.refreshToken"),e=window.localStorage.getItem("movai.tokenRemember"),i=window.sessionStorage.getItem("movai.session"),null!==t&&null!==n){h.next=6;break}return h.abrupt("return",!1);case 6:o=null,h.prev=7,o=r()(t),h.next=14;break;case 11:return h.prev=11,h.t0=h.catch(7),h.abrupt("return",!1);case 14:if(!(o.exp>(new Date).getTime()/1e3)){h.next=16;break}return h.abrupt("return",!0);case 16:if("false"!=e||null!==i){h.next=19;break}return logout(),h.abrupt("return",!1);case 19:if(!n){h.next=41;break}if(h.prev=20,!(r()(n).exp<(new Date).getTime()/1e3)){h.next=24;break}throw"refresh token has expired";case 24:return u="".concat("http://localhost:5004","/token-refresh/"),s={"Content-Type":"application/json"},h.next=28,regeneratorRuntime.awrap(fetch(u,{method:"POST",headers:s,body:JSON.stringify({token:n})}));case 28:return a=h.sent,c=a.status,h.next=32,regeneratorRuntime.awrap(a.json());case 32:if(f=h.sent,200!==c){h.next=37;break}return window.localStorage.setItem("movai.token",f.access_token),window.localStorage.setItem("movai.refreshToken",f.refresh_token),h.abrupt("return",!0);case 37:h.next=41;break;case 39:h.prev=39,h.t1=h.catch(20);case 41:return h.abrupt("return",!1);case 42:case"end":return h.stop()}}),null,null,[[7,11],[20,39]])}},u=o,s=e(1),a={ofNull:function(t){return s.Maybe.fromNull(t)},range:function(t,n){for(var e=[],i=0;i<n;i++)e.push(i);return e},randomInt:function(t,n){return Math.floor(a.random(t,n))},random:function(t,n){return t+(n-t)*Math.random()},normalizeStr:function(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()},groupBy:function(t,n){var e={};return t.forEach((function(t){var i=n(t);e[i]||(e[i]=[]),e[i].push(t)})),e}},c=a;function f(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var h=u.getToken,l=u.AuthException,p=u.checkLogin,d=function t(){var n=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"connect",(function(){p().then((function(t){if(!t)throw new l("login error");var e="".concat(n.WS_API,"?token=").concat(h());n.websocket=new WebSocket(e),n.websocket.onopen=function(t){return n.onOpen(t)},n.websocket.onclose=function(t){return n.onClose(t)},n.websocket.onmessage=function(t){return n.onMessage(t)},n.websocket.onerror=function(t){return n.onError(t)}}))})),f(this,"onOpen",(function(t){n.dispatch("onopen",void 0)})),f(this,"onClose",(function(t){n.dispatch("onclose",void 0),1e3!==t.code&&window.setTimeout(n.connect(),n.timeout)})),f(this,"onMessage",(function(t){p().then((function(e){if(!e)throw new l("login error");var i;try{i=JSON.parse(t.data)}catch(t){return void console.error(t)}if(i.error)console.error(i.error);else{var r=i.patterns,o=!0,u=!1;["list","unsubscribe","subscribe"].includes(i.event)&&(r=r.map((function(t){return"unsubscribe"===i.event&&delete n.callbacks[JSON.stringify(t)],i.event+"/"+JSON.stringify(t)})),"list"===i.event&&(r=["list"]),o=!1,u=!0),r.map((function(t){n.dispatch(t,i,o,u)}))}}))})),f(this,"checkTest",(function(t,e,i,r){return new Promise((function(o,u){n.dispatch(t,e,i,r),o("DONE")}))})),f(this,"onError",(function(t){n.dispatch("onerror",void 0)})),f(this,"onEvent",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;n.evt_callbacks[t]=n.evt_callbacks[t]||[],n.evt_callbacks[t].push(e)})),f(this,"close",(function(){return n.websocket.close()})),f(this,"subscribe",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r={event:"subscribe",pattern:t},o=JSON.stringify(t);n.callbacks[o]=n.callbacks[o]||[],n.callbacks[o].push(e),i&&(n.evt_callbacks["subscribe/"+o]=n.evt_callbacks["subscribe"+o]||[],n.evt_callbacks["subscribe/"+o].push(i)),n._send(r)})),f(this,"unsubscribe",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;console.log("Unsubscribe called "+JSON.stringify(t));var i={event:"unsubscribe",pattern:t},r=JSON.stringify(t);e&&(n.evt_callbacks["unsubscribe/"+r]=n.evt_callbacks["unsubscribe/"+r]||[],n.evt_callbacks["unsubscribe/"+r].push(e)),n._send(i)})),f(this,"list",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e={event:"list"};n.evt_callbacks.list=n.evt_callbacks.list||[],n.evt_callbacks.list.push(t),n._send(e)})),f(this,"_send",(function(t){var e=n;try{n.websocket.send(JSON.stringify(t))}catch(n){var i=void 0;i=setInterval((function(){1===e.websocket.readyState&&(clearInterval(i),e.websocket.send(JSON.stringify(t)))}),200,i)}})),f(this,"dispatch",(function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=void 0,u=t;if(!0===i?(u=JSON.stringify(t),o=n.callbacks[u]):o=n.evt_callbacks[u],void 0!==o){for(var s=0;s<o.length;s++)"function"==typeof o[s]&&o[s](e);o&&!0===r&&(o=[])}})),f(this,"getVar",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"global";if(!["global","fleet"].includes(i))throw"Only fleet and global scopes available.";if("fleet"===i&&t.split("@").length<2)throw"Wrong key format (robot_name@key_name)";var r=n.REST_API+"Var/"+i+"/"+t+"/";p().then((function(t){fetch(r).then((function(t){return t.json()})).then((function(t){e&&e(t)}))}))})),f(this,"setVar",(function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"global";if(!["global","fleet"].includes(r))throw"Only fleet and global scopes available.";if("fleet"===r){t.split("@");if(t.split("@").length<2)throw"Wrong key format (robot_name@key_name)"}var o={key:t,scope:r,value:e},u=n.REST_API+"Var/";p().then((function(t){if(!t)throw new l("login error");fetch(u,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h())}}).then((function(t){i&&i(t)}))}))})),f(this,"post",(function(t,e,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,u=n.REST_API+t+"/"+e+"/";void 0===e&&(u=n.REST_API+t+"/"),p().then((function(t){if(!t)throw new l("login error");fetch(u,{method:"POST",body:JSON.stringify({key:i,data:r}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h())}}).then((function(t){o&&t.json().then((function(n){o(n,t)}))}))}))})),f(this,"upload",(function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o="".concat(n.REST_API,"upload/").concat(t,"/"),u=new FormData;u.append("name",e),u.append("data",i),fetch(o,{method:"POST",body:u}).then((function(t){return t.json()})).then(r)})),f(this,"put",(function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=n.REST_API+t+"/"+e+"/";console.log("database put",o),void 0===e&&(o=n.REST_API+t+"/"),p().then((function(t){if(!t)throw new l("login error");fetch(o,{method:"PUT",body:JSON.stringify(i),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h())}}).then((function(t){r&&t.json().then((function(n){r(n,t)})).catch((function(n){r(void 0,t)}))}))}))})),f(this,"delete",(function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.REST_API+t+"/"+e+"/";void 0!==e?p().then((function(t){if(!t)throw new l("login error");fetch(o,{method:"DELETE",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h())}}).then((function(t){i&&t.json().then((function(n){i(n,t)})).catch((function(n){i(void 0,t)}))}))})):o=n.REST_API+t+"/"})),f(this,"cloudFunction",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;p().then((function(o){if(!o)throw new l("login error");var u=n.REST_API+"function/"+t+"/";fetch(u,{method:"POST",body:JSON.stringify({func:e,args:i}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h())}}).then((function(t){r&&t.json().then((function(t){return r(t)}))}))}))})),f(this,"postTabs",(function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r="User",o=n.REST_API+r+"/"+t+"/";if(void 0!==t){var u=e.map((function(t){return{componentName:t.componentName,name:t.name}})),s={Workspace:"*"};p().then((function(t){fetch(o,{method:"POST",body:JSON.stringify({key:s,data:u}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h())}}).then((function(t){i&&t.json().then((function(n){i(n,t)})).catch((function(n){i(void 0,t)}))}))}))}else o=n.REST_API+r+"/"})),this.host="".concat(window.location.hostname,":").concat(window.location.port),this.WS_API="ws://"+this.host+"/ws/subscriber",this.REST_API="http://"+this.host+"/api/v1/",this.callbacks={},this.evt_callbacks={},this.timeout=3e3,this.websocket=void 0,this.connect()};e.d(n,"Authentication",(function(){return u})),e.d(n,"Utils",(function(){return c})),e.d(n,"Database",(function(){return d}))}]);