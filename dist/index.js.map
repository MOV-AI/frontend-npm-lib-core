{"version":3,"sources":["webpack://Movai/webpack/universalModuleDefinition","webpack://Movai/webpack/bootstrap","webpack://Movai/webpack/runtime/compat get default export","webpack://Movai/webpack/runtime/define property getters","webpack://Movai/webpack/runtime/hasOwnProperty shorthand","webpack://Movai/webpack/runtime/make namespace object","webpack://Movai/external \"@babel/runtime/helpers/esm/asyncToGenerator\"","webpack://Movai/external \"@babel/runtime/regenerator\"","webpack://Movai/external \"jwt-decode\"","webpack://Movai/./src/Authentication/Authentication.js","webpack://Movai/./src/Utils/constants.js","webpack://Movai/external \"@babel/runtime/helpers/esm/toConsumableArray\"","webpack://Movai/external \"@babel/runtime/helpers/esm/classCallCheck\"","webpack://Movai/external \"@babel/runtime/helpers/esm/defineProperty\"","webpack://Movai/external \"@babel/runtime/helpers/esm/typeof\"","webpack://Movai/external \"monet\"","webpack://Movai/./src/Utils/Utils.js","webpack://Movai/./src/BroadcastChannel/BroadcastChannel.js","webpack://Movai/external \"@babel/runtime/helpers/esm/createClass\"","webpack://Movai/./src/AuthWebSocket/AuthWebSocket.js","webpack://Movai/./src/Database/WSSub.js","webpack://Movai/./src/Database/MasterDB.js","webpack://Movai/external \"@babel/runtime/helpers/esm/slicedToArray\"","webpack://Movai/./src/Rest/RestBase.js","webpack://Movai/./src/Rest/WithAuth.js","webpack://Movai/./src/Rest/Rest.js","webpack://Movai/external \"rxjs\"","webpack://Movai/external \"lodash\"","webpack://Movai/./src/Database/Models/BaseModel.js","webpack://Movai/./src/Document/DocumentV1.js","webpack://Movai/external \"@babel/runtime/helpers/esm/assertThisInitialized\"","webpack://Movai/external \"@babel/runtime/helpers/esm/inherits\"","webpack://Movai/external \"@babel/runtime/helpers/esm/possibleConstructorReturn\"","webpack://Movai/external \"@babel/runtime/helpers/esm/getPrototypeOf\"","webpack://Movai/./src/Document/DocumentV2.js","webpack://Movai/./src/Document/Document.js","webpack://Movai/./src/RobotManager/Robot.js","webpack://Movai/external \"lodash/get\"","webpack://Movai/./src/RobotManager/RobotManager.js","webpack://Movai/./src/Database/Database.js","webpack://Movai/./src/Style/Style.js","webpack://Movai/./resources/fonts/icomoon.woff","webpack://Movai/./src/UndoManager/UndoManager.js","webpack://Movai/./src/Clipboard/Clipboard.js","webpack://Movai/./src/User/User.js","webpack://Movai/./src/Database/Manager/DataManagerBase.js","webpack://Movai/./src/Workspace/Workspace.js","webpack://Movai/./src/Snapshot/Snapshot.js"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","require","Authentication","message","this","statusText","name","window","localStorage","getItem","token","getToken","jwtDecode","auth_token","refresh_token","getRefreshToken","error","access_token","login","username","password","remember","removeItem","sessionStorage","headers","fetch","method","body","JSON","stringify","response","status","contentType","includes","json","data","setItem","toString","logout","redirect","location","replace","origin","checkLogin","refreshToken","tokenRemember","sessionFlag","tokenData","Date","getTime","BROADCAST_EVENTS","ISOPEN","RPL_ISOPEN","OPENDOC","RPL_OPENDOC","Utils","x","Maybe","f","g","dot","ofNull","init","end","map","i","e","orSome","ans","j","push","b","Math","floor","random","str","normalize","toLowerCase","array","groupFunction","forEach","s","charAt","toUpperCase","slice","n","prefix","keys","reduce","acc","k","pre","length","assign","flattenObject","c","r","appName","event","callback","currentEvents","subscribed_events","console","log","target","instance","postMessage","msgId","source","close","messageData","BroadcastChannel","onmessage","_onMessage","AuthException","AuthWebSocket","url","wsUrl","onOpen","onClose","onError","onMessage","connectionHandler","evt","connected","socket","timerId","clearTimeout","setTimeout","createSocket","_onOpen","_onClose","_onError","_connectionHandler","sock","then","res","URL","params","URLSearchParams","search","set","WebSocket","onopen","onerror","onclose","send","sub_interval","undefined","setInterval","readyState","clearInterval","WSSUB_STATES","options","timeout","Promise","race","_","reject","Error","websocket","CLOSED","onAuthError","connect","CONNECTING","RECONN_TIMEOUT","pattern","getOrCreate","pushCallback","sub_callbacks","command","_sufix","_pattern","evt_callbacks","retry","RETRIES","getState","OPEN","RESEND_TIMEOUT","is_command","_map","_callbacks","cb","reSubscribe","dispatch","code","NORMAL_CLOSE_EVT","reConnect","msg","parse","values","commands","LIST","EXECUTE","patterns","_prefix","onOnline","onOffline","connectionCheckTimeout","checkConnection","RECONN_VALIDATION_TIMEOUT","connectionPromise","connectionState","err","evt_callback","SUBSCRIBE","fmtMessage","initSocket","addSubscriberCallback","addEventCallback","Array","from","UNSUBSCRIBE","remote_callback","is_pattern","one_shot","resolve","scope","split","REST_API","Authorization","fetchTimeout","packageName","formData","FormData","append","cloudFunction","func","args","result","newValue","componentName","key_workspace","Workspace","isHttps","protocol","host","hostname","port","Map","WSSub","RestBase","output","entries","encodeURIComponent","path","encodeURI","customHeaders","requestUrl","getUrl","payload","ok","_request","post","cbName","fn","validScope","validKey","validateVar","props","handler","__checkLogin","Reflect","Proxy","withAuth","BaseModel","manager","model","database","_subscribe","db","subscribe","_onDataChange","_onDataLoad","default_pattern","Scope","Name","_patterns","isArray","id","_cache","add","unsubscribe","new_obj","lodash","up_path","removeEmpty","join","entry","_get_or_create","remove","_subject","next","nr_patterns","db_state","db_states","ready","_subject_state","freeze","loading","Subject","BehaviorSubject","_db_state","_validatePatterns","_initialize","complete","type","workspace","version","_parseArgs","subscriber","MasterDB","_workspace","_type","_name","_version","apiVersion","Rest","resubscribe","readOnly","onUpdate","destroy","_init","Label","DocumentV2","trgWorkspace","Snapshot","create","srcWorkspace","getAll","DocumentV1","_scope","_id","withDocVersion","docVersion","v1","v2","_path","dtype","spl","Robot","IP","RobotName","ip","logs","logger","time","logSubscriptions","dataSubscriptions","onGetIPCallback","api","Document","property","propValue","onLoad","SCOPE","update","read","robotData","_loadIP","_getLogs","subscriptionId","Util","startLogger","stopLogger","_enqueueNextRequest","robot","RobotManager","robots","robotId","_get","cachedRobots","sendUpdates","isDataLoaded","subscribedOnDataLoad","subscribedOnDataChange","randomId","subscribeToRedis","_applyChanges","changedRobots","onDataLoaded","newRobot","cached","getData","WS_API","p","callbacks","event_name","_send","UndoManager","size","undoStack","Queue","redoStack","undoAbleAction","doAction","paramsObject","pop","undoAction","UndoAbleActionBuilder","_doAction","_undoAction","lambda","some","queue","el","shift","Clipboard","_data","copyKey","inst","write","baseUrl","currTime","timestamp","TIMEOUT","Superuser","DataManagerBase","models","_subscribeModelsReady","onReady","_setModelReady","isReady","subscribeTo","_create","src","createByRef"],"mappings":"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","file":"dist/index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Movai\"] = factory();\n\telse\n\t\troot[\"Movai\"] = factory();\n})(self, function() {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/esm/asyncToGenerator\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/regenerator\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"jwt-decode\");","import jwtDecode from \"jwt-decode\";\n\nconst Authentication = {};\n\nAuthentication.AuthException = function (message) {\n  this.message = message;\n  this.statusText = message;\n  this.name = \"AuthException\";\n};\n\nAuthentication.getToken = () => {\n  const token = window.localStorage.getItem(\"movai.token\");\n  return token ? token : false;\n};\n\nAuthentication.getRefreshToken = () => {\n  const refreshToken = window.localStorage.getItem(\"movai.refreshToken\");\n  return refreshToken ? refreshToken : false;\n};\n\nAuthentication.getTokenData = () => {\n  try {\n    const token = Authentication.getToken();\n    const message = jwtDecode(token).message;\n\n    const tokenData = {\n      message: message,\n      auth_token: false,\n      refresh_token: Authentication.getRefreshToken(),\n      error: false,\n      access_token: token\n    };\n\n    return tokenData;\n  } catch (error) {\n    return {\n      message: {},\n      error: true\n    };\n  }\n};\n\nAuthentication.login = async (username, password, remember) => {\n  // Cleanup...\n  window.localStorage.removeItem(\"movai.token\");\n  window.localStorage.removeItem(\"movai.refreshToken\");\n  window.localStorage.removeItem(\"movai.tokenRemember\");\n  window.sessionStorage.removeItem(\"movai.session\");\n\n  let headers = {};\n  headers[\"Content-Type\"] = \"application/json\";\n\n  const url = `/token-auth/`;\n\n  try {\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers,\n      body: JSON.stringify({\n        username: username,\n        password: password,\n        remember: remember\n      })\n    });\n\n    const { status } = response;\n    const contentType = response.headers.get(\"content-type\");\n    const isJsonType = contentType && contentType.includes(\"application/json\");\n    let data = \n      isJsonType \n        ? await response.json() \n        : { error: response.statusText };\n\n    if (status === 200) {\n      window.localStorage.setItem(\"movai.token\", data[\"access_token\"]);\n      window.localStorage.setItem(\"movai.refreshToken\", data[\"refresh_token\"]);\n      window.localStorage.setItem(\n        \"movai.tokenRemember\",\n        remember == \"undefined\" ? false : remember\n      );\n      window.sessionStorage.setItem(\"movai.session\", true);\n    }\n\n    return data;\n  } catch (e) {\n    // Returns exception error message\n    return { error: e.toString() }\n  }\n};\n\nAuthentication.logout = redirect => {\n  window.localStorage.removeItem(\"movai.token\");\n  window.localStorage.removeItem(\"movai.refreshToken\");\n  window.localStorage.removeItem(\"movai.tokenRemember\");\n  window.sessionStorage.removeItem(\"movai.session\");\n  window.location.replace(redirect || window.location.origin);\n};\n\nAuthentication.checkLogin = async () => {\n  const token = window.localStorage.getItem(\"movai.token\");\n  const refreshToken = window.localStorage.getItem(\"movai.refreshToken\");\n  const tokenRemember = window.localStorage.getItem(\"movai.tokenRemember\");\n  const sessionFlag = window.sessionStorage.getItem(\"movai.session\");\n\n  if (token === null || refreshToken === null) {\n    return false;\n  }\n\n  let tokenData = null;\n  try {\n    tokenData = jwtDecode(token);\n  } catch (e) {\n    return false;\n  }\n\n  // Check if token expired\n  if (tokenData[\"exp\"] > new Date().getTime() / 1000) {\n    return true;\n  }\n\n  // Check SessionStorage flag\n  if (tokenRemember == \"false\" && sessionFlag === null) {\n    Authentication.logout();\n    return false;\n  }\n\n  // Token has expired... Get new Token\n  if (refreshToken) {\n    // Try to get new token\n    try {\n      // Refresh Token\n      const refreshTokenData = jwtDecode(refreshToken);\n      if (refreshTokenData[\"exp\"] < new Date().getTime() / 1000) {\n        throw \"refresh token has expired\";\n      }\n\n      const url = `/token-refresh/`;\n      const headers = { \"Content-Type\": \"application/json\" };\n      const response = await fetch(url, {\n        method: \"POST\",\n        headers,\n        body: JSON.stringify({ token: refreshToken })\n      });\n\n      const { status } = response;\n      const contentType = response.headers.get(\"content-type\");\n      const isJsonType = contentType && contentType.includes(\"application/json\");\n      let data = \n        isJsonType \n          ? await response.json() \n          : null;\n\n      if (status === 200 && data) {\n        window.localStorage.setItem(\"movai.token\", data[\"access_token\"]);\n        window.localStorage.setItem(\n          \"movai.refreshToken\",\n          data[\"refresh_token\"]\n        );\n        return true;\n      }\n    } catch (e) {\n      // Pass\n    }\n  }\n\n  return false;\n};\n\nexport default Authentication;\n","// BroadcastChannel events\nexport const BROADCAST_EVENTS = {\n  ISOPEN: \"ISOPEN\",\n  RPL_ISOPEN: \"RPL-ISOPEN\",\n  OPENDOC: \"OPENDOC\",\n  RPL_OPENDOC: \"RPL-OPENDOC\"\n};\n\n// Robot Logger enum\nexport const LOGGER_STATUS = {\n  init: 0,\n  running: 1,\n  paused: 2,\n  terminated: 3\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/esm/toConsumableArray\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/esm/classCallCheck\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/esm/defineProperty\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/esm/typeof\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"monet\");","import { Maybe } from \"monet\";\n\nconst Utils = {};\n\nUtils.ofNull = x => Maybe.fromNull(x);\n\nUtils.getter = prop => obj => obj[prop];\n\nUtils.dot = f => g => x => f(g(x));\n\nUtils.maybeGet = prop => Utils.dot(Utils.ofNull)(Utils.getter(prop));\n\nUtils.range = (init, end) => {\n  const { i, e } = Maybe.fromNull(end)\n    .map(x => ({ i: init, e: end }))\n    .orSome({ i: 0, e: init });\n  const ans = [];\n  for (let j = i; j < e; j++) ans.push(j);\n  return ans;\n};\n\nUtils.randomInt = (a, b) => Math.floor(Utils.random(a, b));\n\nUtils.random = (a, b) => {\n  const { init, end } = Maybe.fromNull(b)\n    .map(x => ({ init: a, end: b }))\n    .orSome({ init: 0, end: a });\n  return init + (end - init) * Math.random();\n};\n\nUtils.normalizeStr = str => {\n  // from https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript\n  return str\n    .normalize(\"NFD\")\n    .replace(/[\\u0300-\\u036f]/g, \"\")\n    .toLowerCase();\n};\n\n/**\n *\n * @param {*} array\n * @param {*} groupFunction : function x => group class;\n *\n * Usage example:\n *\n * groupBy([1,2,3,4,5,6,7,8,9], x => x % 3) // {0: [3,6,9], 1:[1,4,7], 2:[2,5,8]}\n */\nUtils.groupBy = (array, groupFunction) => {\n  const ans = {};\n  array.forEach(x => {\n    const key = groupFunction(x);\n    if (!ans[key]) ans[key] = [];\n    ans[key].push(x);\n  });\n  return ans;\n};\n\n// From https://flaviocopes.com/how-to-uppercase-first-letter-javascript/\nUtils.capitalize = s => {\n  if (typeof s !== \"string\") return \"\";\n  return s.charAt(0).toUpperCase() + s.slice(1);\n};\n\n/**\n * Positive mod function\n */\nUtils.mod = (x, n) => ((x % n) + n) % n;\n\n/**\n * flatten an object\n * https://github.com/30-seconds/30-seconds-of-code/blob/master/snippets/flattenObject.md\n */\nUtils.flattenObject = (obj, prefix = \"\") =>\n  Object.keys(obj).reduce((acc, k) => {\n    const pre = prefix.length ? prefix + \".\" : \"\";\n\n    if (typeof obj[k] === \"object\")\n      Object.assign(acc, Utils.flattenObject(obj[k], pre + k));\n    else acc[pre + k] = obj[k];\n\n    return acc;\n  }, {});\n\n/**\n * Generate random Guid\n *\n * eg: acb3792a-bc9c-48fc-8dfc-92b6ddc0ec8c\n */\nUtils.randomGuid = () => {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    // eslint-disable-next-line no-mixed-operators\n    var r = (Math.random() * 16) | 0,\n      v = c === \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n};\n\nexport default Utils;\n","import Utils from \"../Utils/Utils\";\n\nclass BroadcastChannel {\n  constructor(appName) {\n    this.appName = appName;\n    this.subscribed_events = {};\n    this.instance = new window.BroadcastChannel(\"channel\");\n    this.instance.onmessage = this._onMessage;\n    console.log(\"BroadcastChannel start for\", this.appName);\n  }\n\n  /**\n   * Subscribe to an event type.\n   * Whenever an event of this type is triggered, the callback will be executed.\n   *\n   * @param {String} event: event name -> should be a valid event name present in BROADCAST_EVENTS\n   * @param {Function} callback: function to be executed when the event is triggered\n   */\n  subscribe = (event, callback) => {\n    const currentEvents = this.subscribed_events[event] || [];\n    this.subscribed_events[event] = [...currentEvents, callback];\n    console.log(\"BroadcastChannel subscribe to\", event);\n  };\n\n  /**\n   * Unsubscribe to an event type.\n   *\n   * @param {String} event: event name -> should be a valid event name present in BROADCAST_EVENTS\n   */\n  unsubscribe = event => {\n    if (!this.subscribed_events.hasOwnProperty(event)) return;\n    delete this.subscribed_events[event];\n    console.log(\"BroadcastChannel unsubscribe to\", event);\n  };\n\n  /**\n   * Post message in broadcast\n   *\n   * @param {String} event: Event name -> should be a valid event name present in BROADCAST_EVENTS\n   * @param {String} target: App name that should receive the event\n   * @param {Object} data: Data to be passed to target app\n   */\n  postMessage = ({ event, target, data }) => {\n    console.log(\"BroadcastChannel postMessage to\", target);\n    this.instance.postMessage({\n      msgId: Utils.randomGuid(),\n      event: event,\n      source: this.appName,\n      target: target,\n      data: data || {}\n    });\n  };\n\n  /**\n   * Close broadcast channel instance\n   */\n  close = () => {\n    this.instance.close();\n    console.log(\"BroadcastChannel close for\", this.appName);\n  };\n\n  /**\n   * Private method that receives all messages from broadcast channel\n   * and sends to the apps if they are subscribed to that event\n   *\n   * @param {Event} message: Message event containing origin and data passed from the postMessage\n   */\n  _onMessage = message => {\n    const messageData = message.data;\n    // Ignore message received if event is not subscribed\n    if (!this.subscribed_events.hasOwnProperty(messageData.event)) return;\n    // Ignore message if target is not appName\n    if (messageData.target !== this.appName) return;\n    // Call subscribed event callback\n    this.subscribed_events[messageData.event].forEach(callback => {\n      callback(messageData);\n    });\n    console.log(\"BroadcastChannel _onMessage from\", messageData.source);\n  };\n}\n\nexport default BroadcastChannel;\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/esm/createClass\");","import Authentication from \"../Authentication/Authentication\";\n\nconst { checkLogin, getToken, AuthException } = Authentication;\n\nexport default class AuthWebSocket {\n  constructor({\n    url = this.wsUrl,\n    onOpen = null,\n    onClose = null,\n    onError = null,\n    onMessage = null,\n    connectionHandler = null\n  }) {\n    this.onOpen = onOpen === null ? this._onOpen : onOpen;\n    this.onClose = onClose === null ? this._onClose : onClose;\n    this.onError = onError === null ? this._onError : onError;\n    this.onMessage = onMessage === null ? this._onMessage : onMessage;\n    this.connectionHandler =\n      connectionHandler === null ? this._connectionHandler : connectionHandler;\n\n    this.wsUrl = url;\n    this.socket = false;\n    this.timerId = false;\n    this.connected = false;\n  }\n\n  _onOpen = evt => {\n    console.log(\"Socket Open: \", evt);\n  };\n\n  _onClose = evt => {\n    console.log(\"Socket Close: \", evt);\n\n    this.connected = false;\n\n    // Deal with reconnecting the socket\n    this.socket = null;\n    if (this.timerId) {\n      clearTimeout(this.timerId);\n    }\n    this.timerId = setTimeout(() => {\n      this.createSocket();\n    }, 5000);\n  };\n\n  _onError = evt => {\n    this.connected = false;\n    console.log(\"Socket Error: \", evt);\n  };\n\n  _onMessage = evt => {\n    console.log(\"Socket Message: \", evt);\n  };\n\n  _connectionHandler = value => {\n    console.log(\"Invalid Token, no handler specified! \", value);\n  };\n\n  createSocket(url = false) {\n    let sock = false;\n\n    checkLogin()\n      .then(res => {\n        if (!res) {\n          throw new AuthException(\"login error\");\n        }\n\n        url = url !== false ? url : this.wsUrl;\n        //const wsUrl = `${url}?token=${getToken()}`;\n\n        let wsUrl = new URL(url);\n        let params = new URLSearchParams(wsUrl.search.slice(1));\n        params.set(\"token\", getToken());\n        wsUrl.search = params;\n\n        sock = new WebSocket(wsUrl.toString());\n        sock.onopen = this.onOpen;\n        sock.onerror = this.onError;\n        sock.onclose = this.onClose;\n        sock.onmessage = this.onMessage;\n\n        this.socket = sock;\n      })\n      .catch(e => {\n        if (e.name === \"AuthException\") {\n          this.connectionHandler(false);\n        }\n      });\n  }\n\n  send(data) {\n    checkLogin()\n      .then(res => {\n        if (!res) {\n          throw new AuthException(\"login error\");\n        }\n\n        this.socket.send(data);\n      })\n      .catch(e => {\n        switch (e.name) {\n          case \"AuthException\":\n            this.connectionHandler(false);\n            break;\n\n          case \"InvalidStateError\":\n            // In case of the socket is not-ready, re-try sending the message until success\n            var self = this;\n            let sub_interval = undefined;\n            sub_interval = setInterval(\n              () => {\n                if (self.socket.readyState === 1) {\n                  clearInterval(sub_interval);\n                  self.socket.send(data);\n                }\n              },\n              400,\n              sub_interval\n            );\n            break;\n        }\n      });\n  }\n\n  close() {\n    if (this.socket) {\n      this.socket.close();\n      clearTimeout(this.timerId);\n      this.connected = false;\n    }\n  }\n}\n","import AuthWebSocket from \"../AuthWebSocket/AuthWebSocket\";\nimport Authentication from \"../Authentication/Authentication\";\nconst { getToken, AuthException, checkLogin } = Authentication;\n\nconst WSSUB_STATES = {\n  NOT_INIT: 0,\n  INIT: 1,\n  CONNECTING: 2,\n  OPEN: 3,\n  CLOSED: 4\n};\n\nconst CONNECTION = {\n  online: 0,\n  offline: 1\n};\n\n/**\n * WSSub - class to handle redis subscribers using authenticated websockets\n */\nclass WSSub {\n  constructor() {\n    const isHttps = window.location.protocol === \"https:\";\n    this.host = `${window.location.hostname}:${window.location.port}`;\n    this.url = `${isHttps ? \"wss\" : \"ws\"}://${this.host}/ws/subscriber`;\n    this.REST_API = `${window.location.protocol}//${this.host}/api/v1/`;\n    this.RECONN_TIMEOUT = 3000;\n    this.RECONN_VALIDATION_TIMEOUT = 5000;\n    this.RESEND_TIMEOUT = 1000;\n    this.RETRIES = 3;\n    this.NORMAL_CLOSE_EVT = 1000;\n\n    // supported commands\n    this.commands = {\n      SUBSCRIBE: \"subscribe\",\n      UNSUBSCRIBE: \"unsubscribe\",\n      LIST: \"list\",\n      EXECUTE: \"execute\"\n    };\n\n    this.onOnline = () => {};\n    this.onOffline = () => {};\n    this.connectionState = CONNECTION.online;\n\n    this.websocket = null;\n    // map with callbacks related with pattern subscription\n    this.sub_callbacks = new Map();\n    // map with callbacks related with event subscription\n    this.evt_callbacks = new Map();\n    // to abort a pending fetch\n  }\n\n  fetchTimeout = (url, options, timeout = 5000) => {\n    return Promise.race([\n      fetch(url, options),\n      new Promise((_, reject) =>\n        setTimeout(() => {\n          reject(new Error(\"Timeout\"));\n        }, timeout)\n      )\n    ]);\n  };\n\n  /**\n   * get the connection state\n   * https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/readyState\n   */\n  getState = () => {\n    return this.websocket?.socket?.readyState || WebSocket.CLOSED;\n  };\n\n  /**\n   * initialize the socket instance\n   */\n\n  initSocket = () => {\n    if (this.websocket) return this;\n    this.status = WSSUB_STATES.INIT;\n\n    const { url, onOpen, onClose, onError, onMessage, onAuthError } = this;\n\n    // TODO extend WSSub from AuthWebSocket instead\n    this.websocket = new AuthWebSocket({\n      url,\n      onOpen,\n      onClose,\n      onError,\n      onMessage,\n      connectionHandler: onAuthError\n    });\n\n    this.connect();\n    return this;\n  };\n\n  /**\n   * connection initialization\n   */\n  connect = () => {\n    this.status = WSSUB_STATES.CONNECTING;\n    this.websocket.createSocket();\n\n    return this;\n  };\n\n  /**\n   * try to reconnect\n   */\n  reConnect = () => {\n    const { CONNECTING, OPEN } = WSSUB_STATES;\n\n    if ([CONNECTING, OPEN].includes(this.status)) return;\n\n    this.status = CONNECTING;\n\n    setTimeout(this.connect, this.RECONN_TIMEOUT);\n  };\n\n  /**\n   * creates a new pair if does not exits and returns it\n   * @param {Map} map sub_callbacks or evt_callbacks\n   * @param {string} pattern is the map key\n   *\n   * @returns {array} the value associated with the pattern\n   */\n  getOrCreate = (map, pattern) => {\n    return map.get(pattern) || map.set(pattern, []).get(pattern);\n  };\n\n  /**\n   * push callback to the map\n   * @param {Map} sub_callbacks or evt_callbacks\n   * @param {string} pattern is the map key\n   * @param {function} callback function to execute\n   */\n  pushCallback = (map, pattern, callback) => {\n    this.getOrCreate(map, pattern).push(callback);\n\n    return this;\n  };\n\n  /**\n   * add subscriber callback\n   * @param {function} callback function to execute\n   * @param {string} pattern pattern to subscribe to\n   */\n  addSubscriberCallback = (callback, pattern) => {\n    if (typeof callback !== \"function\") return this;\n\n    return this.pushCallback(this.sub_callbacks, pattern, callback);\n  };\n\n  /**\n   * add event callback\n   * @param {strin} command command to send; event to subscribe\n   * @param {function} callback function to execute\n   * @param {string} pattern pattern to subscribe to\n   */\n  addEventCallback = (command, callback, pattern) => {\n    if (typeof callback !== \"function\") return this;\n\n    const _sufix = pattern ? `/${pattern}` : \"\";\n    const _pattern = `${command}${_sufix}`;\n\n    return this.pushCallback(this.evt_callbacks, _pattern, callback);\n  };\n\n  /**\n   * sends a message to the server\n   * @param {any} message to send to the server\n   */\n  send = (message, retry = 0) => {\n    try {\n      // do not keep trying to send the message after 3 times\n      if (retry >= this.RETRIES) throw new Error(\"Timeout sending message\");\n      // stringify the message before sending it\n      // try to resend if the connection is not yet open\n      this.getState() !== WebSocket.OPEN\n        ? setTimeout(this.send, this.RESEND_TIMEOUT, message, retry + 1)\n        : this.websocket.send(JSON.stringify(message));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  /**\n   * execute callbacks subscribed to events or patterns\n   * @param {string} pattern pattern or event\n   * @param {bool} is_command when true callback only executes once\n   * @param {any} message data to pass to the callback\n   */\n  dispatch = (pattern, is_command = true, message) => {\n    const _map = is_command ? this.evt_callbacks : this.sub_callbacks;\n    const _callbacks = _map.get(pattern) || [];\n\n    _callbacks.forEach(cb => {\n      setTimeout(cb, 0, message);\n    });\n\n    if (is_command) _map.delete(pattern);\n  };\n\n  /**\n   * format the message to send to the server\n   * @param {string} event event to send to the server\n   * @param {string} pattern pattern to send to the server\n   */\n  fmtMessage = (event, pattern) => ({ event, pattern });\n\n  /**\n   * triggered when the socket opens\n   */\n  onOpen = evt => {\n    this.status = WSSUB_STATES.OPEN;\n\n    // send current subscriptions to the server\n    this.reSubscribe();\n    this.dispatch(\"onopen\");\n  };\n\n  /**\n   * triggered when the socket closes\n   */\n  onClose = evt => {\n    this.dispatch(\"onclose\");\n    this.status = WSSUB_STATES.CLOSED;\n\n    // reconnect if the connection was not closed on purpose\n    if (evt.code !== this.NORMAL_CLOSE_EVT) {\n      this.reConnect();\n    }\n  };\n\n  /**\n   * triggered when the socket raises an error\n   */\n  onError = evt => {\n    this.dispatch(\"onerror\");\n  };\n\n  /**\n   * triggered whit authentication error\n   */\n  onAuthError = () => {\n    // reconnect on authentication error\n    this.reConnect();\n  };\n\n  /**\n   * triggered when the socket receives a message\n   */\n  onMessage = msg => {\n    try {\n      const data = JSON.parse(msg.data);\n      if (data.error) throw new Error(data.error);\n\n      const { event } = data;\n      const is_command = Object.values(this.commands).includes(event);\n      const { LIST, EXECUTE } = this.commands;\n\n      const rcv_patterns = [LIST, EXECUTE].includes(event)\n        ? [event]\n        : data.patterns;\n\n      rcv_patterns.forEach(pattern => {\n        const _prefix = is_command ? `${event}/` : \"\";\n        const _pattern = `${_prefix}${JSON.stringify(pattern)}`;\n\n        this.dispatch(_pattern, is_command, data);\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  /**\n   * Start offline validation\n   * @param {Object} callback\n   *  {\n   *    onOnline  -> function to be called when the user is back online\n   *    onOffline -> function to be called when the user is offline\n   *  }\n   * @returns MasterDB instance\n   */\n  offlineValidation = ({\n    onOnline = this.onOnline,\n    onOffline = this.onOffline\n  }) => {\n    this.onOnline = onOnline;\n    this.onOffline = onOffline;\n    // Set interval to send heartbeat\n    clearInterval(this.connectionCheckTimeout);\n    this.connectionCheckTimeout = setInterval(\n      this.checkConnection,\n      this.RECONN_VALIDATION_TIMEOUT\n    );\n    // Return MasterDB instance\n    return this;\n  };\n\n  /**\n   * Retry connection\n   * @returns connection (heartbeat) promise\n   */\n  retryConnection = () => {\n    // Check connection again\n    const connectionPromise = this.checkConnection();\n    // Clear interval to start again\n    clearInterval(this.connectionCheckTimeout);\n    this.connectionCheckTimeout = setInterval(\n      this.checkConnection,\n      this.RECONN_VALIDATION_TIMEOUT\n    );\n    // Return promise\n    return connectionPromise;\n  };\n\n  /**\n   * Check connection state by doing requests\n   * @returns Heartbeat fetch promise\n   */\n  checkConnection = () => {\n    return fetch(`/token-verify/`, {\n      method: \"POST\",\n      body: JSON.stringify({ token: \"\" })\n    })\n      .then(res => {\n        if (this.connectionState === CONNECTION.online) return;\n        this.connectionState = CONNECTION.online;\n        this.onOnline();\n      })\n      .catch(err => {\n        if (this.connectionState === CONNECTION.offline) return;\n        this.connectionState = CONNECTION.offline;\n        this.onOffline();\n      });\n  };\n\n  /**\n   * subscribe to a redis pattern\n   * @param {string} pattern pattern to subscribe to\n   * @param {function} callback function to execute on changes\n   * @param {function} evt_callback function to execute on the subscription event\n   *\n   */\n  subscribe = (pattern, callback, evt_callback) => {\n    const { SUBSCRIBE } = this.commands;\n    const message = this.fmtMessage(SUBSCRIBE, pattern);\n    const _pattern = JSON.stringify(pattern);\n\n    this.initSocket()\n      .addSubscriberCallback(callback, _pattern)\n      .addEventCallback(SUBSCRIBE, evt_callback, _pattern)\n      .send(message);\n  };\n\n  /**\n   * send current subscriptions to the server\n   */\n  reSubscribe = () => {\n    const { SUBSCRIBE } = this.commands;\n\n    Array.from(this.sub_callbacks.keys()).forEach(key => {\n      const message = this.fmtMessage(SUBSCRIBE, JSON.parse(key));\n      this.send(message);\n    });\n  };\n\n  /**\n   * unsubscribe from changes related to the pattern\n   * @param {string} pattern pattern to unsubscribe\n   * @param {function} callback function to execute on event unsubscribe\n   *\n   */\n  unsubscribe = (pattern, callback) => {\n    const { UNSUBSCRIBE } = this.commands;\n    const message = this.fmtMessage(UNSUBSCRIBE, pattern);\n    const _pattern = JSON.stringify(pattern);\n\n    this.initSocket()\n      .addEventCallback(UNSUBSCRIBE, callback, _pattern)\n      .send(message);\n  };\n\n  /**\n   * get the list of the current pattern subscriptions\n   * @param {function} evt_callback function to execute on event\n   */\n  list = evt_callback => {\n    const { LIST } = this.commands;\n    const message = this.fmtMessage(LIST);\n\n    this.initSocket().addEventCallback(LIST, evt_callback).send(message);\n  };\n\n  /**\n   * execute - executes a remote procedure call\n   * @param {string} remote_callback name of the remote callback to execute\n   * @param {object} data data to send to the remote callback\n   * @param {function} evt_callback function to execute on event\n   */\n  execute = (remote_callback, data, evt_callback) => {\n    const { EXECUTE } = this.commands;\n    const message = { event: EXECUTE, callback: remote_callback, ...data };\n\n    this.initSocket().addEventCallback(EXECUTE, evt_callback).send(message);\n  };\n\n  /**\n   * subscribe to events onopen, onclose, onerror\n   * @param {string} event name of the event to subscribe\n   * @param {function} callback function to execute on event\n   */\n  onEvent = (event, callback) => {\n    this.initSocket().addEventCallback(event, callback);\n  };\n\n  /**\n   * close the socket connection\n   */\n  close = () => {\n    this.websocket.close();\n    this.websocket = null;\n  };\n\n  /**\n   * the following code should be moved to a separate class\n   * added to support current applications\n   * TODO. review and move\n   */\n\n  checkTest = (pattern, data, is_pattern, one_shot) => {\n    return new Promise((resolve, reject) => {\n      this.dispatch(pattern, data, is_pattern, one_shot);\n      if (true) {\n        resolve(\"DONE\");\n      }\n    });\n  };\n\n  /* Get value from key in Var, scope fleet or global */\n  getVar = (key, callback = undefined, scope = \"global\") => {\n    if (![\"global\", \"fleet\"].includes(scope)) {\n      throw \"Only fleet and global scopes available.\";\n    }\n    if (scope === \"fleet\") {\n      // key format: robot_name@key_name\n      if (key.split(\"@\").length < 2) {\n        throw \"Wrong key format (robot_name@key_name)\";\n      }\n    }\n    const url = this.REST_API + \"database/\" + scope + \"/\" + key + \"/\";\n\n    checkLogin().then(res => {\n      fetch(url)\n        .then(response => response.json())\n\n        .then(data => {\n          if (callback) {\n            callback(data);\n          } else {\n            //NOTHING\n          }\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    });\n  };\n\n  /* Set value from key in Var, scope fleet or global */\n  setVar = (key, value, callback = undefined, scope = \"global\") => {\n    if (![\"global\", \"fleet\"].includes(scope)) {\n      throw \"Only fleet and global scopes available.\";\n    }\n    if (scope === \"fleet\") {\n      // key format: robot_name@key_name\n      const values = key.split(\"@\");\n      if (key.split(\"@\").length < 2) {\n        throw \"Wrong key format (robot_name@key_name)\";\n      }\n    }\n    const data = { key: key, scope: scope, value: value };\n    const url = this.REST_API + \"database/\";\n\n    checkLogin().then(res => {\n      if (!res) {\n        throw new AuthException(\"login error\");\n      }\n\n      fetch(url, {\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      }).then(res => {\n        if (callback) {\n          callback(res);\n        }\n      });\n    });\n  };\n\n  /**\n   * GET value from url\n   * @param url String\n   * @param callback function\n   * @memberof Database\n   */\n  get = async (url, callback = undefined) => {\n    checkLogin().then(async res => {\n      if (!res) {\n        throw new AuthException(\"login error\");\n      }\n      this.fetchTimeout(url, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      })\n        .then(res => {\n          if (callback) {\n            res\n              .json()\n              .then(data => {\n                callback(data, res);\n              })\n              .catch(e => {\n                callback(undefined, e);\n              });\n          }\n        })\n        .catch(e => callback(undefined, e));\n    });\n  };\n\n  /**\n   * Set value from key in Scope\n   * @param scope String\n   * @param name String - Instance Name\n   * @param key String - Key to override\n   * @param value Obj\n   * @param callback function\n   * @memberof Database\n   */\n  post = (scope, name, key, value, callback = undefined) => {\n    let url = this.REST_API + scope + \"/\" + name + \"/\";\n    if (name === undefined) {\n      url = this.REST_API + scope + \"/\";\n    }\n\n    checkLogin().then(res => {\n      if (!res) {\n        throw new AuthException(\"login error\");\n      }\n\n      fetch(url, {\n        method: \"POST\",\n        body: JSON.stringify({ key: key, data: value }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      }).then(res => {\n        if (callback) {\n          res\n            .json()\n            .then(data => {\n              callback(data, res);\n            })\n            .catch(e => {\n              callback(undefined, e);\n            });\n        }\n      });\n    });\n  };\n\n  upload = (packageName, key, value, callback = undefined) => {\n    const url = `${this.REST_API}upload/${packageName}/`;\n    const formData = new FormData();\n    formData.append(\"name\", key);\n    formData.append(`data`, value);\n    fetch(url, {\n      method: \"POST\",\n      body: formData,\n      headers: {\n        Authorization: `Bearer ${getToken()}`\n      }\n    })\n      .then(res => res.json())\n      .then(callback);\n  };\n\n  /**\n   * Update key\n   * @param scope String\n   * @param name String - Instance Name\n   * @param value Obj\n   * @param callback function\n   * @memberof Database\n   */\n  put = (scope, name, value, callback = undefined) => {\n    let url = this.REST_API + scope + \"/\" + name + \"/\";\n\n    if (name === undefined) {\n      url = this.REST_API + scope + \"/\";\n    }\n\n    checkLogin().then(res => {\n      if (!res) {\n        throw new AuthException(\"login error\");\n      }\n\n      fetch(url, {\n        method: \"PUT\",\n        body: JSON.stringify(value),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      }).then(res => {\n        if (callback) {\n          res\n            .json()\n            .then(data => {\n              callback(data, res);\n            })\n            .catch(e => {\n              callback(undefined, res);\n\n              if (process.env.NODE_ENV === \"development\") {\n                alert(\n                  \"Development Mode \\n\" +\n                    \"Status: \" +\n                    res.status +\n                    \"\\n\" +\n                    \"Error: \" +\n                    res.statusText\n                );\n              }\n            });\n        }\n      });\n    });\n  };\n\n  /**\n   * Set value from key in Scope\n   * @param scope String\n   * @param name String - Instance Name\n   * @param key String - Key to override\n   * @param value Obj\n   * @param callback function\n   * @memberof Database\n   */\n  delete = (scope, name, callback = undefined, data = {}) => {\n    let url = this.REST_API + scope + \"/\" + name + \"/\";\n    if (name === undefined) {\n      url = this.REST_API + scope + \"/\";\n      return;\n    }\n\n    checkLogin().then(res => {\n      if (!res) {\n        throw new AuthException(\"login error\");\n      }\n\n      fetch(url, {\n        method: \"DELETE\",\n        body: JSON.stringify(data),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      }).then(res => {\n        if (callback) {\n          res\n            .json()\n            .then(data => {\n              callback(data, res);\n            })\n            .catch(e => {\n              callback(undefined, res);\n\n              if (process.env.NODE_ENV === \"development\") {\n                alert(\n                  \"Development Mode \\n\" +\n                    \"Status: \" +\n                    res.status +\n                    \"\\n\" +\n                    \"Error: \" +\n                    res.statusText\n                );\n              }\n            });\n        }\n      });\n    });\n  };\n\n  /**\n   * Set value from key in Scope\n   * @param cloudFunction String - callback name\n   * @param func String - Function in the callback. default \"\"\n   * @param args Object - Args {key:value}... key is the param in the function\n   * @param callback func - Callback to parse the response\n   * @memberof Database\n   */\n  cloudFunction = (cloudFunction, func = \"\", args, callback = undefined) => {\n    return checkLogin().then(res => {\n      if (!res) {\n        throw new AuthException(\"login error\");\n      }\n\n      const url = this.REST_API + \"function/\" + cloudFunction + \"/\";\n      return fetch(url, {\n        method: \"POST\",\n        body: JSON.stringify({ func: func, args: args }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      }).then(res => {\n        if (callback) {\n          res\n            .json()\n            .then(data => callback(data))\n            .catch(e => {\n              console.log(\"cloudFunction error\", e);\n              callback({ result: false, error: e });\n            });\n        }\n      });\n    });\n  };\n\n  /**\n   * Set tabs in a currentUser\n   * @param scope String\n   * @param name String - Instance Name\n   * @param key String - Key to override\n   * @param value Obj\n   * @param callback function\n   * @memberof Database\n   */\n  postTabs = (name, value, callback = undefined) => {\n    let scope = \"User\";\n    let url = this.REST_API + scope + \"/\" + name + \"/\";\n    if (name === undefined) {\n      url = this.REST_API + scope + \"/\";\n      return;\n    }\n    let newValue = value.map(obj => {\n      return { componentName: obj.componentName, name: obj.name };\n    });\n    const key_workspace = {\n      Workspace: \"*\"\n    };\n\n    checkLogin().then(res => {\n      fetch(url, {\n        method: \"POST\",\n        body: JSON.stringify({ key: key_workspace, data: newValue }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      }).then(res => {\n        if (callback) {\n          res\n            .json()\n            .then(data => {\n              callback(data, res);\n            })\n            .catch(e => {\n              callback(undefined, res);\n\n              if (process.env.NODE_ENV === \"development\") {\n                alert(\n                  \"Development Mode \\n\" +\n                    \"Status: \" +\n                    res.status +\n                    \"\\n\" +\n                    \"Error: \" +\n                    res.statusText\n                );\n              }\n            });\n        }\n      });\n    });\n  };\n}\n\nexport default WSSub;\n","import WSSub from \"./WSSub\";\n/**\n * A Database singleton\n */\nconst MasterDB = new WSSub();\nexport default MasterDB;\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/esm/slicedToArray\");","const RestBase = {};\n\n/**\n * Encodes the values of an object\n * @param {Object} data - Object to encode\n */\nRestBase.encodeURI = data => {\n  const output = {};\n  for (const [key, value] of Object.entries(data)) {\n    output[key] = encodeURIComponent(value);\n  }\n  return output;\n};\n\n/**\n * Get composed url\n * @param {String} path - Relative path\n */\nRestBase.getUrl = ({ path, search = {} }) => {\n  const host = `${window.location.hostname}:${window.location.port}`;\n\n  const params = new URLSearchParams(RestBase.encodeURI(search));\n\n  return `${\n    window.location.protocol\n  }//${host}/api/${path}?${params.toString()}`;\n};\n\n/**\n * Execute request\n * @param {String} path - Relative path\n * @param {String} method - Request method\n * @param {Object} body - Request payload\n */\nRestBase._request = ({\n  url,\n  path,\n  method = \"GET\",\n  body = {},\n  search,\n  customHeaders = {}\n}) => {\n  const headers = customHeaders;\n  const requestUrl = url ? url : RestBase.getUrl({ path, search });\n  const skipBody = [\"HEAD\", \"GET\"];\n\n  const payload = {\n    method,\n    headers\n  };\n\n  if (!skipBody.includes(method)) payload.body = JSON.stringify(body);\n\n  return fetch(requestUrl, payload).then(response => {\n    if (!response.ok) {\n      return Promise.reject(response);\n    }\n    return response.json();\n  });\n};\n\n/**\n * Execute GET request\n * @param {String} path - Relative path\n * @param {String} search - Search parameters\n */\n\nRestBase.get = ({ url, path, search, customHeaders = {} }) => {\n  return RestBase._request({ url, path, search, customHeaders });\n};\n\n/**\n * Execute POST request\n * @param {String} path - Relative path\n * @param {Object} body - Request payload\n */\nRestBase.post = ({ url, path, body, customHeaders = {} }) => {\n  const method = \"POST\";\n\n  return RestBase._request({ url, path, method, body, customHeaders });\n};\n\n/**\n * Execute PUT request\n * @param {String} path - Relative path\n * @param {Object} body - Request payload\n */\nRestBase.put = ({ url, path, body, customHeaders = {} }) => {\n  const method = \"PUT\";\n\n  return RestBase._request({ url, path, method, body, customHeaders });\n};\n\n/**\n * Execute DELETE request\n * @param {String} path - Relative path\n */\nRestBase.delete = ({ url, path, body, customHeaders = {} }) => {\n  const method = \"DELETE\";\n\n  return RestBase._request({ url, path, method, body, customHeaders });\n};\n\n/**\n * Upload file to a specific Package\n * @param {String} packageName - Package name\n * @param {String} key - Key to insert in the package\n * @param {String} value - Value of the key\n */\nRestBase.upload = ({ packageName, key, value, customHeaders = {} }) => {\n  const path = `v1/upload/${packageName}/`;\n  const body = new FormData();\n  body.append(\"name\", key);\n  body.append(\"data\", value);\n\n  return RestBase.post({ path, body, customHeaders });\n};\n\n/**\n * Execute remote procedure call\n * @param {String} cbName - Callback name\n * @param {String} func - Function in the callback\n * @param {Object} args - Args to pass to the function\n */\nRestBase.cloudFunction = ({ cbName, func = \"\", args, customHeaders = {} }) => {\n  const path = `v1/function/${cbName}/`;\n  const body = { func, args };\n\n  return RestBase.post({ path, body, customHeaders });\n};\n\nRestBase.validScope = scope => [\"global\", \"fleet\"].includes(scope);\nRestBase.validKey = key => key.split(\"@\") >= 2;\nRestBase.validateVar = (key, scope) => {\n  const validators = [\n    {\n      fn: scope => RestBase.validScope(scope),\n      error: \"Invalid scope\"\n    },\n    {\n      fn: key => RestBase.validKey(key),\n      error: \"Key format should be <robot name>@<key name>\"\n    }\n  ];\n\n  validators.forEach(obj => {\n    if (!obj.fn()) {\n      throw new Error(obj.error);\n    }\n  });\n};\n\nRestBase.getVar = ({ key, scope = \"global\", customHeaders = {} }) => {\n  RestBase.validateVar(key, scope);\n\n  const path = `v1/database/${scope}/${key}/`;\n\n  return RestBase.get({ path, customHeaders }).then(response =>\n    response.json()\n  );\n};\n\nRestBase.setVar = ({ key, value, scope = \"global\", customHeaders = {} }) => {\n  RestBase.validateVar(key, scope);\n\n  const path = `v1/database/`;\n  const body = { key, scope, value };\n\n  return RestBase.post({ path, body, customHeaders }).then(response =>\n    response.json()\n  );\n};\n\nexport default RestBase;\n","import Authentication from \"../Authentication/Authentication\";\nconst { checkLogin, AuthException, getToken } = Authentication;\n\nconst withAuth = (obj, props = {}) => {\n  const handler = {\n    __checkLogin: (target, prop) => {\n      return args =>\n        checkLogin().then(res => {\n          // check login error\n          if (!res) {\n            throw new AuthException(\"Login error\");\n          }\n\n          // inject authorization headers\n          const customHeaders = {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${getToken()}`\n          };\n\n          // return the original call with custom headers and original arguments\n          return Reflect.get(target, prop)({ customHeaders, ...args });\n        });\n    },\n\n    get: function (target, prop) {\n      return this.__checkLogin(target, prop);\n    }\n  };\n\n  return new Proxy(Object.assign(obj, props), handler);\n};\n\nexport default withAuth;\n","import RestBase from \"./RestBase\";\nimport withAuth from \"./WithAuth\";\n\nconst Rest = withAuth(RestBase);\n\nexport default Rest;\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"rxjs\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash\");","import { Subject, BehaviorSubject } from \"rxjs\";\nimport lodash from \"lodash\";\n\nimport Utils from \"../../Utils/Utils\";\n//import RestApi from \"../../RestApi\";\n\nexport default class BaseModel {\n  constructor(manager, model, database, patterns) {\n    this.db_states = Object.freeze({ error: -1, loading: 0, ready: 1 });\n    this.db = database;\n    this.model = model;\n    this.manager = manager;\n\n    this._subject = new Subject();\n    this._cache = new Map();\n    this._subject_state = new BehaviorSubject(0);\n    this._db_state = this.db_states.loading;\n\n    this.patterns = this._validatePatterns(patterns);\n    this.nr_patterns = this.patterns.length;\n\n    //this.api = new RestApi(this.model);\n\n    this._initialize();\n  }\n\n  _initialize = () => {\n    this.patterns.forEach(pattern => this._subscribe(pattern));\n\n    return this;\n  };\n\n  _subscribe = pattern => {\n    this.db.subscribe(\n      pattern,\n      data => this._onDataChange(data),\n      data => this._onDataLoad(data)\n    );\n  };\n\n  _validatePatterns = patterns => {\n    const default_pattern = { Scope: this.model, Name: \"*\" };\n    const _patterns = patterns ? patterns : default_pattern;\n    return Array.isArray(_patterns) ? _patterns : [_patterns];\n  };\n\n  get db_state() {\n    return this._db_state;\n  }\n\n  set db_state(value) {\n    if (value !== this._db_state) {\n      this._db_state = value;\n      if (value !== this.db_states.ready) {\n        this._subject_state.next(value);\n      } else {\n        this._subject_state.complete();\n      }\n    }\n  }\n\n  get = id => {\n    return this._cache.get(id);\n  };\n\n  getAll = () => {\n    return this._cache.values();\n  };\n\n  _get_or_create = key => {\n    return (\n      this.get(key) ||\n      this.add(key, {\n        name: key,\n        obj: {},\n        id: key\n      }).get(key)\n    );\n  };\n\n  add = (key, data) => {\n    return this._cache.set(key, data);\n  };\n\n  remove = key => {\n    this._cache.delete(key);\n  };\n\n  destroy = () => {\n    this.patterns.forEach(pattern => this.db.unsubscribe(pattern));\n  };\n\n  /**\n   * removes empty objects, returning changed object\n   */\n  removeEmpty = (obj, path) => {\n    let new_obj = null;\n\n    if (lodash.isEmpty(lodash.get(obj, path, {}))) {\n      // remove empty\n      new_obj = lodash.omit(obj, path);\n\n      const up_path = path.split(\".\");\n      // check up level is empty\n      if (up_path.length > 1) {\n        new_obj = this.removeEmpty(new_obj, up_path.slice(0, -1).join(\".\"));\n      }\n    }\n\n    return new_obj || obj;\n  };\n\n  /**\n   *    Events\n   */\n\n  _onDataChange = data => {\n    const obj = lodash.get(data, `key.${this.model}`, {});\n\n    Object.keys(obj).forEach(key => {\n      const entry = this._get_or_create(key);\n\n      if (data.event === \"del\") {\n        // deleting an entry\n        const path = Object.keys(Utils.flattenObject(obj[key]))[0];\n\n        entry.obj = this.removeEmpty(lodash.omit(entry.obj, path), path);\n\n        // completly remove object\n        if (lodash.isEmpty(entry.obj)) {\n          this.remove(key);\n        }\n      } else {\n        // updating an entry\n        lodash.merge(entry.obj, obj[key]);\n      }\n\n      this._subject.next({ data: entry, event: data.event });\n    });\n  };\n\n  _onDataLoad = data => {\n    const obj = lodash.get(data, `value.${this.model}`, {});\n\n    Object.keys(obj).forEach(key => {\n      /*this.add(key, {\n        obj: obj[key],\n        id: key\n      });*/\n      const entry = this._get_or_create(key);\n      lodash.merge(entry.obj, obj[key]);\n    });\n\n    if (--this.nr_patterns <= 0) {\n      this.db_state = this.db_states.ready;\n    }\n  };\n\n  onReady = callback => {\n    if (this.db_state !== this.db_states.ready) {\n      this._subject_state.subscribe(\n        () => {},\n        () => {},\n        () => callback()\n      );\n    } else {\n      callback();\n    }\n  };\n\n  onUpdate = callback => {\n    this._subject.subscribe(callback);\n  };\n}\n","import BaseModel from \"../Database/Models/BaseModel\";\nimport MasterDB from \"../Database/MasterDB\";\nimport Rest from \"../Rest/Rest\";\n\n/**\n * Document class to use with the Rest api V1\n */\nclass DocumentV1 {\n  constructor({ type, name, workspace = \"global\", version, path }) {\n    this._init(type, name, workspace, version, path);\n  }\n\n  /** Initialization */\n  _init = (type, name, workspace, version, path) => {\n    this._parseArgs(workspace, type, name, version, path);\n    this.subscriber = undefined;\n    this.database = MasterDB;\n    this.data = {};\n  };\n\n  /** Parse instance args */\n  _parseArgs = (workspace, type, name, version, path) => {\n    const [_workspace, _type, _name, _version] = (path || \"\").split(\"/\");\n\n    this.workspace = _workspace || workspace;\n    this.type = _type || type;\n    this.name = _name || name;\n    this.version = _version || version;\n  };\n\n  /** Document properties */\n\n  /**\n   * Get document read only status\n   */\n  get readOnly() {\n    return this.workspace !== \"global\";\n  }\n\n  /**\n   * Get document url\n   * Same as path\n   */\n  get url() {\n    return this.path;\n  }\n\n  /**\n   * Get document path\n   */\n  get path() {\n    const { workspace, type, name, version } = this;\n    return `${workspace}/${type}/${name}/${version}`;\n  }\n\n  /** Document handlers */\n\n  /**\n   * Get document data\n   */\n  read = (apiVersion = \"v1\") => {\n    const { type, name } = this;\n    const path =\n      apiVersion === \"v1\" ? `v1/${type}/${name}/` : `v2/db/${this.path}`;\n\n    return Rest.get({ path }).then(data => {\n      this.data = data;\n      return apiVersion === \"v1\" ? data : data[type][name];\n    });\n  };\n\n  /**\n   * Update the document using PUT request\n   * @param {Object} body Request payload\n   */\n  update = body => {\n    const { type, name } = this;\n    const path = `v1/${type}/${name}/`;\n\n    return Rest.put({ path, body });\n  };\n\n  /**\n   * Overwrite document using POST\n   * @param {Object} body : Request body\n   * @returns Request promise\n   */\n  overwrite = body => {\n    const { type, name } = this;\n    const path = `v1/${type}/${name}/`;\n\n    return Rest.post({ path, body: { data: { ...body } } });\n  };\n\n  /** Subscribers */\n\n  /**\n   * Subscribe to document changes (notifications only available in the global workspace)\n   * @param {Function} callback Callback to execute when the document is updated\n   */\n  subscribe = callback => {\n    this.resubscribe(callback);\n  };\n\n  /**\n   * Resubscribe to document changes (notifications only available in the global workspace)\n   * @param {Function} callback Callback to execute when the document is updated\n   */\n  resubscribe = callback => {\n    if (this.readOnly) return;\n\n    this.unsubscribe();\n\n    this.subscriber = new BaseModel({}, this.type, this.database, [\n      { Scope: this.type, Name: this.name }\n    ]);\n\n    this.subscriber.onUpdate(() => {\n      if (!this.subscriber) return;\n      this.data = this.subscriber.get(this.name)?.obj || {};\n      callback(this.data);\n    });\n  };\n\n  /**\n   * Unsubscribe from document changes\n   */\n  unsubscribe = () => {\n    if (this.subscriber) this.subscriber.destroy();\n    this.subscriber = null;\n  };\n\n  /** Static handlers */\n\n  /**\n   *\n   * @param {String} type Type of the document\n   * @param {String} name Name of the document\n   */\n  static create({ type, name, body = {} }) {\n    const path = `v1/${type}/`;\n\n    return Rest.post({ path, body: { data: { ...body, Label: name } } });\n  }\n\n  /**\n   * Delete document or partial deletion of the document\n   * @param {String} type Type of the document\n   * @param {String} name Name of the document\n   * @param {Object} body Data of the document\n   */\n  static delete({ type, name, body }) {\n    const path = `v1/${type}/${name}/`;\n\n    return Rest.delete({ path, body });\n  }\n}\n\nexport default DocumentV1;\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/esm/assertThisInitialized\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/esm/inherits\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/esm/possibleConstructorReturn\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/esm/getPrototypeOf\");","import DocumentV1 from \"./DocumentV1\";\nimport Rest from \"../Rest/Rest\";\n\n/**\n * Document class to use with the Rest api V2\n */\nclass DocumentV2 extends DocumentV1 {\n  /**\n   * Get document data\n   */\n  read = () => {\n    const { workspace, type, name, version } = this;\n    const path = `v2/db/${workspace}/${type}/${name}/${version}`;\n\n    return Rest.get({ path }).then(data => {\n      this.data = data;\n      return data;\n    });\n  };\n\n  /**\n   * Update the document using PUT request\n   * @param {Object} body Request payload\n   */\n  update = body => {\n    const { workspace, type, name, version } = this;\n    const path = `v2/db/${workspace}/${type}/${name}/${version}`;\n\n    return Rest.put({ path, body });\n  };\n\n  /** Snapshot handlers */\n\n  /**\n   *\n   * @param {String} trgWorkspace Workspace where to create the snapshot\n   * @param {String} version Snapshot version\n   */\n  createSnapshot = ({ trgWorkspace, version }) => {\n    const { workspace, type, name } = this;\n\n    return Snapshot.create({\n      trgWorkspace,\n      srcWorkspace: workspace,\n      type,\n      name,\n      version\n    });\n  };\n\n  /**\n   * Get list of snapshots for the current document in the current workspace\n   */\n  getSnapShots = () => {\n    const { workspace, type, name } = this;\n\n    return Snapshot.getAll({\n      workspace,\n      type,\n      name\n    });\n  };\n\n  /** Static handlers */\n\n  /**\n   *\n   * @param {String} type Type of the document\n   * @param {String} name Name of the document\n   * @param {String} workspace Workspace of the document\n   */\n  static create({ type, name, workspace }) {\n    const path = `v2/db/${workspace}/${type}/${name}`;\n    const body = { Label: name };\n\n    return Rest.post({ path, body });\n  }\n\n  /**\n   * Delete document or partial deletion of the document\n   * @param {String} type Type of the document\n   * @param {String} name Name of the document\n   * @param {Object} body Data of the document\n   * @param {String} workspace Workspace of the document\n   */\n  static delete({ type, name, body, workspace = \"global\" }) {\n    const path = `v2/db/${workspace}/${type}/${name}`;\n\n    return Rest.delete({ path, body });\n  }\n\n  /**\n   * Get all existing documents in a workspace\n   * @param {String} workspace workspace to search\n   * @param {String} type filter documents by type\n   * @param {String} id further filter documents by type and id\n   */\n  static getDocs = ({ workspace, scope, id }) => {\n    const _scope = scope ? `/${scope}` : \"\";\n    const _id = scope ? (id ? `/${id}` : \"\") : \"\";\n    const path = `v2/db/${workspace}${_scope}${_id}`;\n\n    return Rest.get({ path });\n  };\n}\n\nexport default DocumentV2;\n","import DocumentV1 from \"./DocumentV1\";\nimport DocumentV2 from \"./DocumentV2\";\nimport Rest from \"../Rest/Rest\";\n\nconst withDocVersion = function (docVersion) {\n  return {\n    v1: DocumentV1,\n    v2: DocumentV2\n  }[docVersion];\n};\n\nclass Document {\n  constructor(args, docVersion = \"v1\") {\n    // create instance of DocumentV1 or DocumentV2\n    return new (withDocVersion(docVersion))(args);\n  }\n\n  /** Static handlers */\n\n  /**\n   * Forward create call to the correct Document version\n   * @param {Object} args Object with arguments to forward\n   * @param {String} docVersion Document version to use\n   */\n  static create(args, docVersion = \"v1\") {\n    return withDocVersion(docVersion).create(args);\n  }\n\n  /**\n   * Forward delete call to the correct version\n   * @param {Object} args Object with arguments to forward\n   * @param {String} docVersion Document version to use\n   */\n  static delete(args, docVersion = \"v1\") {\n    return withDocVersion(docVersion).delete(args);\n  }\n\n  /**\n   * Parse path into an object\n   * @param {String} path The path to parse\n   * @param {String} dtype Default type\n   *\n   * @return {Object} An object with workspace, type, name, version\n   */\n\n  static parsePath(_path, dtype = \"Node\") {\n    const spl = _path.split(\"/\");\n\n    const workspace = spl.length > 1 ? spl[0] : \"global\";\n    const type = spl[1] || dtype;\n    const name = spl[2] || _path;\n    const version = spl[3] || \"__UNVERSIONED__\";\n    const path = `${workspace}/${type}/${name}/${version}`;\n\n    return { workspace, type, name, version, path };\n  }\n\n  /**\n   * Check if document exists in redis or archive\n   *\n   * @param {*} data\n   * {\n   *  name      : document name\n   *  scope     : document scope (Annotation, Callback, ...)\n   *  version   : document version\n   *  workspace : workspace (global, user1, user2, ...)\n   * }\n   * @returns {Boolean} True if document already exists and False otherwise\n   */\n  static exists({ name, scope, version, workspace = \"global\" }) {\n    const path = `v2/db/${workspace}/${scope}/${name}/${version}`;\n    return Rest.get({ path })\n      .then(data => {\n        return !!data[scope];\n      })\n      .catch(err => {\n        return err.status === 500 ? false : true;\n      });\n  }\n}\n\nexport default Document;\n","import MasterDB from \"../Database/MasterDB\";\nimport Util from \"../Utils/Utils\";\nimport Rest from \"../Rest/Rest\";\nimport Document from \"../Document/Document\";\nimport { LOGGER_STATUS } from \"../Utils/constants\";\n\nclass Robot {\n  constructor(id, data = { IP: \"\", RobotName: \"\" }) {\n    this.id = id;\n    this.ip = data.IP;\n    this.name = data.RobotName;\n    this.data = data;\n    this.logs = [];\n    this.logger = {\n      status: LOGGER_STATUS.init,\n      timeout: null,\n      time: 3000\n    };\n    this.logSubscriptions = {};\n    this.dataSubscriptions = {};\n    this.onGetIPCallback = () => {};\n    this.api = new Document(\n      {\n        workspace: \"global\",\n        type: \"Robot\",\n        name: this.id,\n        version: \"-\"\n      },\n      \"v2\"\n    );\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Class methods                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   * Subscribe to a robot property from redis\n   *\n   * @param {String} property: Property name\n   * @param {String} propValue: Property value\n   * @param {Function} loadCallback: Function to be called on data load\n   * @param {Function} updateCallback: Function to be called on data updated\n   */\n  subscribe({\n    property,\n    propValue = \"*\",\n    onLoad = () => {},\n    onUpdate = () => {}\n  }) {\n    MasterDB.subscribe(\n      {\n        Scope: Robot.SCOPE,\n        Name: this.id,\n        [property]: propValue\n      },\n      update => onUpdate(update),\n      data => onLoad(data)\n    );\n  }\n\n  /**\n   * Unsubscribe to a robot property from redis\n   *\n   * @param {String} property: Property name\n   * @param {String} propValue: Property value\n   */\n  unsubscribe({ property, propValue = \"*\" }) {\n    MasterDB.unsubscribe({\n      Scope: Robot.SCOPE,\n      Name: this.id,\n      [property]: propValue\n    });\n  }\n\n  /**\n   * Get robot data from redis\n   */\n  getData() {\n    this.api.read().then(data => {\n      const robotData = data?.Robot?.[this.id];\n      if (robotData) {\n        this.data = robotData;\n        this.ip = robotData.IP;\n        this.name = robotData.RobotName;\n      }\n    });\n  }\n\n  /**\n   * Unsubscribe to a robot property from redis\n   *\n   * @param {Function} callback: Function to be called on robot IP data load\n   */\n  getIP(callback = () => {}) {\n    if (this.ip !== \"\") return this.ip;\n    // Request IP\n    this.onGetIPCallback = callback;\n    this.subscribe(\"IP\", this._loadIP(this));\n  }\n\n  /**\n   * Start robot logger\n   */\n  startLogger() {\n    this.logger.status = LOGGER_STATUS.running;\n    this._getLogs();\n  }\n\n  /**\n   * Stop robot logger\n   */\n  stopLogger() {\n    this.logger.status = LOGGER_STATUS.paused;\n    clearTimeout(this.logger.timeout);\n  }\n\n  /**\n   * Subscribe to the robot logs\n   *\n   * @param {Function} callback: Function to be called on get logs\n   */\n  subscribeToData(callback) {\n    const subscriptionId = Util.randomGuid();\n    this.dataSubscriptions[subscriptionId] = { send: callback };\n    return subscriptionId;\n  }\n\n  /**\n   * Send updated data to subscribed components\n   */\n  sendUpdates() {\n    Object.keys(this.dataSubscriptions).forEach(key => {\n      this.dataSubscriptions[key].send(this.data);\n    });\n  }\n\n  /**\n   * Subscribe to the robot logs\n   *\n   * @param {Function} callback: Function to be called on get logs\n   */\n  subscribeToLogs(callback) {\n    const subscriptionId = Util.randomGuid();\n    this.logSubscriptions[subscriptionId] = { send: callback };\n    if (this.logger.status !== LOGGER_STATUS.running) this.startLogger();\n    else if (this.logs) callback(this.logs);\n    return subscriptionId;\n  }\n\n  /**\n   * Unsubscribe to the robot logs\n   *\n   * @param {String} subscriptionId: Subscription id that needs to be canceled\n   */\n  unsubscribeToLogs(subscriptionId) {\n    if (!subscriptionId || !this.logSubscriptions[subscriptionId]) return;\n    delete this.logSubscriptions[subscriptionId];\n    if (Object.keys(this.logSubscriptions).length === 0) this.stopLogger();\n  }\n\n  /**\n   * Refresh logs\n   */\n  refreshLogs() {\n    clearTimeout(this.logger.timeout);\n    this._getLogs();\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Private functions                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   * Get robot logs\n   */\n  _getLogs() {\n    if (Object.keys(this.logSubscriptions).length === 0) return; // Stop if there's no active subscriptions\n    if (this.logger.status !== LOGGER_STATUS.running) return; // Or if logger status is not \"running\"\n    if (!this.ip) return; // Or if robot has no IP\n    // Get logs from server\n    const url = `http://${this.ip}/api/v1/logs/?level=info,error,warning,critical&limit=50&tags=ui`;\n    Rest.get({ url })\n      .then(response => {\n        if (!response || !response.data || !response.data.length) return;\n        // Cache log data and send response to active subscriptions\n        this.logs = response.data;\n        for (const key in this.logSubscriptions) {\n          this.logSubscriptions[key].send(response.data);\n        }\n        // Enqueue next request\n        this._enqueueNextRequest();\n      })\n      .catch(err => {\n        // Enqueue next request\n        this.logger.time += 1000;\n        this._enqueueNextRequest();\n      });\n  }\n\n  /**\n   * Enqueue next request to get logs\n   */\n  _enqueueNextRequest() {\n    clearTimeout(this.logger.timeout);\n    this.logger.timeout = setTimeout(() => this._getLogs(), this.logger.time);\n  }\n\n  /**\n   * Function to be called when robot IP subscribed loads\n   *\n   * @param {Object} data: Data returned on IP subscribe event\n   */\n  _loadIP(robot) {\n    return data => {\n      if (data.value) {\n        robot.ip = data.value.Robot[robot.id].IP;\n        robot.onGetIPCallback(robot.ip);\n      }\n      // Set local IP as null\n      else robot.ip = null;\n    };\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                   Static attributes                                  *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   * Robot scope name\n   */\n  static SCOPE = \"Robot\";\n}\n\nexport default Robot;\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/get\");","import MasterDB from \"../Database/MasterDB\";\nimport Util from \"../Utils/Utils\";\nimport Robot from \"./Robot\";\nimport _get from \"lodash/get\";\n\n/**\n * RobotManager class : handles cached data and subscription\n */\nclass RobotManager {\n  constructor() {\n    if (instance) return instance;\n    this.isDataLoaded = false;\n    this.subscribedOnDataLoad = [];\n    this.subscribedOnDataChange = [];\n    this.randomId = Util.randomGuid();\n    this.robots = {};\n    this.cachedRobots = {};\n    this.subscribeToRedis();\n    this.destroy = function () {\n      // Unsubscribe on destroy\n      MasterDB.unsubscribe({ Scope: \"Robot\", RobotName: \"*\", IP: \"*\" });\n    };\n    instance = this;\n  }\n\n  /**\n   * Subscribe to Redis to get all robots and listen for any changes in them\n   */\n  subscribeToRedis() {\n    MasterDB.subscribe(\n      { Scope: \"Robot\", RobotName: \"*\", IP: \"*\" },\n      data => {\n        // Apply changes to update local robots\n        const robots = data.key[\"Robot\"];\n        this._applyChanges(robots);\n        // Set changed robots\n        const changedRobots = {};\n        Object.keys(robots).forEach(robotId => {\n          changedRobots[robotId] = this.cachedRobots[robotId];\n        });\n        // Call subscribed onChange functions\n        this.subscribedOnDataChange.forEach(cb => cb(changedRobots));\n      },\n      data => {\n        this.isDataLoaded = true;\n        if (data.value) {\n          this.cachedRobots = data.value.Robot;\n          Object.keys(this.cachedRobots).forEach(id => {\n            this.robots[id] = new Robot(id, this.cachedRobots[id]);\n          });\n        }\n        // Call subscribed onLoad functions\n        this.subscribedOnDataLoad.forEach(cb => cb(this.cachedRobots));\n      }\n    );\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                      Class methods                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   * Subscribe to changes in robots\n   * @param {function} cb : Callback to be called for all property changes at any robot in DB\n   */\n  subscribeToChanges(cb) {\n    this.subscribedOnDataChange.push(cb);\n  }\n\n  /**\n   * Get all robots\n   * @param {Function} onDataLoaded : Function to be called on data first load\n   * @returns {Object} All cached robots\n   */\n  getAll(onDataLoaded = () => {}) {\n    if (this.isDataLoaded) {\n      onDataLoaded(this.cachedRobots);\n    } else {\n      this.subscribedOnDataLoad.push(onDataLoaded);\n    }\n    return this.cachedRobots;\n  }\n\n  /**\n   * Get robot by ID\n   * @param {String} id : Robot id\n   * @returns {Robot} Instance of Robot class for requested id\n   */\n  getRobot(id) {\n    if (this.robots[id]) return this.robots[id];\n    let newRobot;\n    const cached = this.cachedRobots[id];\n    // If requested robot id is already in cache\n    if (cached) {\n      newRobot = new Robot(id, cached);\n    }\n    // If requested robot is not in cache\n    else {\n      newRobot = new Robot(id);\n    }\n    // Add robot to cache and return\n    newRobot.getData();\n    this.robots[id] = newRobot;\n    return newRobot;\n  }\n\n  //========================================================================================\n  /*                                                                                      *\n   *                                    Private Methods                                   *\n   *                                                                                      */\n  //========================================================================================\n\n  /**\n   * Apply robot changes to cachedRobots and robots\n   * @param {Object} robots : Robots changes\n   */\n  _applyChanges = robots => {\n    Object.keys(robots).forEach(robotId => {\n      const obj = _get(robots, robotId, {});\n      // Set robot object if nto yet created\n      if (!this.robots[robotId]) {\n        this.cachedRobots[robotId] = obj;\n        this.robots[robotId] = new Robot(robotId, obj);\n      }\n      // Update cached and robot data attribute\n      Object.keys(obj).forEach(key => {\n        this.cachedRobots[robotId][key] = obj[key];\n        this.robots[robotId][\"data\"][key] = obj[key];\n      });\n      // Send updated data to subscribed components\n      this.robots[robotId].sendUpdates();\n    });\n  };\n}\n\nvar instance = null;\nexport default RobotManager;\n","import Authentication from \"../Authentication/Authentication\";\nimport AuthWebSocket from \"../AuthWebSocket/AuthWebSocket\";\nconst { getToken, AuthException, checkLogin } = Authentication;\n\nclass Database {\n  constructor() {\n    this.host = `${window.location.hostname}:${window.location.port}`;\n    const isHttps = window.location.protocol === \"https:\";\n    this.WS_API = `${isHttps ? \"wss\" : \"ws\"}://${this.host}/ws/subscriber`;\n    this.REST_API = `${window.location.protocol}//${this.host}/api/v1/`;\n    this.callbacks = {};\n    this.evt_callbacks = {};\n    this.timeout = 3000;\n    this.websocket = undefined;\n    this.connect();\n  }\n\n  connect = () => {\n    this.websocket = new AuthWebSocket({\n      url: this.WS_API,\n      onOpen: this.onOpen,\n      onClose: this.onClose,\n      onError: this.onError,\n      onMessage: this.onMessage,\n      connectionHandler: null\n    });\n    this.websocket.createSocket();\n  };\n\n  onOpen = evt => {\n    this.dispatch(\"onopen\", undefined);\n  };\n\n  onClose = evt => {\n    this.dispatch(\"onclose\", undefined);\n    if (evt.code !== 1000) {\n      window.setTimeout(this.connect(), this.timeout);\n    }\n  };\n\n  onMessage = evt => {\n    let data;\n    try {\n      data = JSON.parse(evt.data);\n    } catch (err) {\n      console.error(err);\n      return;\n    }\n    if (data.error) {\n      console.error(data.error);\n      return;\n    }\n    let patterns = data.patterns;\n    let is_pattern = true;\n    let one_shot = false;\n    if ([\"list\", \"unsubscribe\", \"subscribe\"].includes(data.event)) {\n      patterns = patterns.map(p => {\n        if (data.event === \"unsubscribe\") {\n          delete this.callbacks[JSON.stringify(p)];\n        }\n        return data.event + \"/\" + JSON.stringify(p);\n      });\n      if (data.event === \"list\") {\n        patterns = [\"list\"];\n      }\n\n      is_pattern = false;\n      one_shot = true;\n    }\n\n    patterns.map(pattern => {\n      this.dispatch(pattern, data, is_pattern, one_shot);\n    });\n  };\n\n  /////TEST\n  checkTest = (pattern, data, is_pattern, one_shot) => {\n    return new Promise((resolve, reject) => {\n      this.dispatch(pattern, data, is_pattern, one_shot);\n      if (true) {\n        resolve(\"DONE\");\n      }\n    });\n  };\n\n  onError = evt => {\n    this.dispatch(\"onerror\", undefined);\n  };\n\n  /* Subscribe to websocket events onopen, onclose, onerror*/\n  onEvent = (event_name, callback = undefined) => {\n    this.evt_callbacks[event_name] = this.evt_callbacks[event_name] || [];\n    this.evt_callbacks[event_name].push(callback);\n  };\n\n  close = () => this.websocket.close();\n\n  /* Subscribe to redis pattern */\n  subscribe = (_pattern, callback = undefined, evt_callback = undefined) => {\n    const message = { event: \"subscribe\", pattern: _pattern };\n    let pattern = JSON.stringify(_pattern);\n    this.callbacks[pattern] = this.callbacks[pattern] || [];\n    this.callbacks[pattern].push(callback);\n    if (evt_callback) {\n      this.evt_callbacks[\"subscribe/\" + pattern] =\n        this.evt_callbacks[\"subscribe\" + pattern] || [];\n      this.evt_callbacks[\"subscribe/\" + pattern].push(evt_callback);\n    }\n    this._send(message);\n  };\n\n  unsubscribe = (_pattern, evt_callback = undefined) => {\n    console.log(\"Unsubscribe called \" + JSON.stringify(_pattern));\n    const message = { event: \"unsubscribe\", pattern: _pattern };\n    var pattern = JSON.stringify(_pattern);\n    if (evt_callback) {\n      this.evt_callbacks[\"unsubscribe/\" + pattern] =\n        this.evt_callbacks[\"unsubscribe/\" + pattern] || [];\n      this.evt_callbacks[\"unsubscribe/\" + pattern].push(evt_callback);\n    }\n    this._send(message);\n  };\n\n  /* List all subscribed patterns */\n  list = (evt_callback = undefined) => {\n    const message = { event: \"list\" };\n    this.evt_callbacks[\"list\"] = this.evt_callbacks[\"list\"] || [];\n    this.evt_callbacks[\"list\"].push(evt_callback);\n    this._send(message);\n  };\n\n  _send = message => {\n    this.websocket.send(JSON.stringify(message));\n  };\n\n  /* Trigger callbacks attached to patterns and events*/\n  dispatch = (_pattern, message, is_pattern = false, one_shot = false) => {\n    /*if is_pattern is false then pattern is an event thus trigger evt_callbacks */\n    let _callbacks = undefined;\n    var pattern = _pattern;\n    if (is_pattern === true) {\n      pattern = JSON.stringify(_pattern);\n      _callbacks = this.callbacks[pattern];\n    } else {\n      _callbacks = this.evt_callbacks[pattern];\n    }\n\n    if (_callbacks === undefined) return;\n    for (let i = 0; i < _callbacks.length; i++) {\n      if (typeof _callbacks[i] === \"function\") {\n        _callbacks[i](message);\n      }\n    }\n    if (_callbacks) {\n      if (one_shot === true) {\n        _callbacks = [];\n      } else {\n        //NOTHING\n      }\n    }\n  };\n\n  /**\n   * STOPPED HERE\n   */\n\n  /* Get value from key in Var, scope fleet or global */\n  getVar = (key, callback = undefined, scope = \"global\") => {\n    if (![\"global\", \"fleet\"].includes(scope)) {\n      throw \"Only fleet and global scopes available.\";\n    }\n    if (scope === \"fleet\") {\n      // key format: robot_name@key_name\n      if (key.split(\"@\").length < 2) {\n        throw \"Wrong key format (robot_name@key_name)\";\n      }\n    }\n    const url = this.REST_API + \"database/\" + scope + \"/\" + key + \"/\";\n\n    checkLogin().then(res => {\n      fetch(url)\n        .then(response => response.json())\n        .then(data => {\n          if (callback) {\n            callback(data);\n          } else {\n            //NOTHING\n          }\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    });\n  };\n\n  /* Set value from key in Var, scope fleet or global */\n  setVar = (key, value, callback = undefined, scope = \"global\") => {\n    if (![\"global\", \"fleet\"].includes(scope)) {\n      throw \"Only fleet and global scopes available.\";\n    }\n    if (scope === \"fleet\") {\n      // key format: robot_name@key_name\n      const values = key.split(\"@\");\n      if (key.split(\"@\").length < 2) {\n        throw \"Wrong key format (robot_name@key_name)\";\n      }\n    }\n    const data = { key: key, scope: scope, value: value };\n    const url = this.REST_API + \"database/\";\n\n    checkLogin().then(res => {\n      if (!res) {\n        throw new AuthException(\"login error\");\n      }\n\n      fetch(url, {\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      }).then(res => {\n        if (callback) {\n          callback(res);\n        }\n      }).catch(e => {\n        console.log(e);\n      });\n    });\n  };\n\n  /**\n   * GET value from url\n   * @param url String\n   * @param callback function\n   * @memberof Database\n   */\n  get = (url, callback = undefined) => {\n    checkLogin().then(res => {\n      if (!res) {\n        throw new AuthException(\"login error\");\n      }\n\n      fetch(url, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      }).then(res => {\n        if (callback) {\n          res\n            .json()\n            .then(data => {\n              callback(data, res);\n            })\n            .catch(e => {\n              callback(undefined, e);\n            });\n        }\n      });\n    });\n  };\n\n  /**\n   * Set value from key in Scope\n   * @param scope String\n   * @param name String - Instance Name\n   * @param key String - Key to override\n   * @param value Obj\n   * @param callback function\n   * @memberof Database\n   */\n  post = (scope, name, key, value, callback = undefined) => {\n    let url = this.REST_API + scope + \"/\" + name + \"/\";\n    if (name === undefined) {\n      url = this.REST_API + scope + \"/\";\n    }\n\n    checkLogin().then(res => {\n      if (!res) {\n        throw new AuthException(\"login error\");\n      }\n\n      fetch(url, {\n        method: \"POST\",\n        body: JSON.stringify({ key: key, data: value }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      }).then(res => {\n        if (callback) {\n          res\n            .json()\n            .then(data => {\n              callback(data, res);\n            })\n            .catch(e => {\n              callback(undefined, e);\n            });\n        }\n      });\n    });\n  };\n\n  upload = (packageName, key, value, callback = undefined) => {\n    const url = `${this.REST_API}upload/${packageName}/`;\n    const formData = new FormData();\n    formData.append(\"name\", key);\n    formData.append(`data`, value);\n    fetch(url, { method: \"POST\", body: formData })\n      .then(res => res.json())\n      .then(callback)\n      .catch(e => {\n        console.log('upload error', e);\n        callback(undefined);\n      });\n  };\n\n  /**\n   * Update key\n   * @param scope String\n   * @param name String - Instance Name\n   * @param value Obj\n   * @param callback function\n   * @memberof Database\n   */\n  put = (scope, name, value, callback = undefined) => {\n    let url = this.REST_API + scope + \"/\" + name + \"/\";\n    console.log(\"database put\", url);\n    if (name === undefined) {\n      url = this.REST_API + scope + \"/\";\n    }\n\n    checkLogin().then(res => {\n      if (!res) {\n        throw new AuthException(\"login error\");\n      }\n\n      fetch(url, {\n        method: \"PUT\",\n        body: JSON.stringify(value),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      }).then(res => {\n        if (callback) {\n          res\n            .json()\n            .then(data => {\n              callback(data, res);\n            })\n            .catch(e => {\n              callback(undefined, res);\n\n              if (process.env.NODE_ENV === \"development\") {\n                alert(\n                  \"Development Mode \\n\" +\n                    \"Status: \" +\n                    res.status +\n                    \"\\n\" +\n                    \"Error: \" +\n                    res.statusText\n                );\n              }\n            });\n        }\n      });\n    });\n  };\n\n  /**\n   * Set value from key in Scope\n   * @param scope String\n   * @param name String - Instance Name\n   * @param key String - Key to override\n   * @param value Obj\n   * @param callback function\n   * @memberof Database\n   */\n  delete = (scope, name, callback = undefined, data = {}) => {\n    let url = this.REST_API + scope + \"/\" + name + \"/\";\n    if (name === undefined) {\n      url = this.REST_API + scope + \"/\";\n      return;\n    }\n\n    checkLogin().then(res => {\n      if (!res) {\n        throw new AuthException(\"login error\");\n      }\n\n      fetch(url, {\n        method: \"DELETE\",\n        body: JSON.stringify(data),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      }).then(res => {\n        if (callback) {\n          res\n            .json()\n            .then(data => {\n              callback(data, res);\n            })\n            .catch(e => {\n              callback(undefined, res);\n\n              if (process.env.NODE_ENV === \"development\") {\n                alert(\n                  \"Development Mode \\n\" +\n                    \"Status: \" +\n                    res.status +\n                    \"\\n\" +\n                    \"Error: \" +\n                    res.statusText\n                );\n              }\n            });\n        }\n      });\n    });\n  };\n\n  /**\n   * Set value from key in Scope\n   * @param cloudFunction String - callback name\n   * @param func String - Function in the callback. default \"\"\n   * @param args Object - Args {key:value}... key is the param in the function\n   * @param callback func - Callback to parse the response\n   * @memberof Database\n   */\n  cloudFunction = (cloudFunction, func = \"\", args, callback = undefined) => {\n    checkLogin().then(res => {\n      if (!res) {\n        throw new AuthException(\"login error\");\n      }\n\n      const url = this.REST_API + \"function/\" + cloudFunction + \"/\";\n      fetch(url, {\n        method: \"POST\",\n        body: JSON.stringify({ func: func, args: args }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      }).then(res => {\n        if (callback) {\n          res.json()\n            .then(data => callback(data))\n            .catch(e => { \n              console.log(e); \n              callback(undefined); \n            });\n        }\n      });\n    });\n  };\n\n  /**\n   * Set tabs in a currentUser\n   * @param scope String\n   * @param name String - Instance Name\n   * @param key String - Key to override\n   * @param value Obj\n   * @param callback function\n   * @memberof Database\n   */\n  postTabs = (name, value, callback = undefined) => {\n    let scope = \"User\";\n    let url = this.REST_API + scope + \"/\" + name + \"/\";\n    if (name === undefined) {\n      url = this.REST_API + scope + \"/\";\n      return;\n    }\n    let newValue = value.map(obj => {\n      return { componentName: obj.componentName, name: obj.name };\n    });\n    const key_workspace = {\n      Workspace: \"*\"\n    };\n\n    checkLogin().then(res => {\n      fetch(url, {\n        method: \"POST\",\n        body: JSON.stringify({ key: key_workspace, data: newValue }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getToken()}`\n        }\n      }).then(res => {\n        if (callback) {\n          res\n            .json()\n            .then(data => {\n              callback(data, res);\n            })\n            .catch(e => {\n              callback(undefined, res);\n\n              if (process.env.NODE_ENV === \"development\") {\n                alert(\n                  \"Development Mode \\n\" +\n                    \"Status: \" +\n                    res.status +\n                    \"\\n\" +\n                    \"Error: \" +\n                    res.statusText\n                );\n              }\n            });\n        }\n      });\n    });\n  };\n}\n\nexport default Database;\n","import icons from \"../../resources/fonts/icomoon.woff\";\n\n// font generated in https://icomoon.io/\n\nconst Style = `\n@font-face {\n  font-family: 'mov.ai';\n  src: url(${icons}) format(\"woff\");\n  font-weight: normal;\n  font-style: normal;\n  font-display: block;\n}\n\n[class^=\"icon-\"], [class*=\" icon-\"] {\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: 'mov.ai' !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.icon-widget:before {\n  content: \"\\\\e900\";\n}\n.icon-tree:before {\n  content: \"\\\\e903\";\n}\n.icon-Statistics:before {\n  content: \"\\\\e906\";\n}\n.icon-Scenes:before {\n  content: \"\\\\e907\";\n}\n.icon-Sad:before {\n  content: \"\\\\e908\";\n}\n.icon-repeat:before {\n  content: \"\\\\e909\";\n}\n.icon-packages:before {\n  content: \"\\\\e90c\";\n}\n.icon-outline-off:before {\n  content: \"\\\\e90d\";\n}\n.icon-outline:before {\n  content: \"\\\\e90e\";\n}\n.icon-out:before {\n  content: \"\\\\e90f\";\n}\n.icon-Nodes:before {\n  content: \"\\\\e911\";\n}\n.icon-Layouts:before {\n  content: \"\\\\e913\";\n}\n.icon-info:before {\n  content: \"\\\\e914\";\n}\n.icon-in:before {\n  content: \"\\\\e915\";\n}\n.icon-Happy:before {\n  content: \"\\\\e916\";\n}\n.icon-grid:before {\n  content: \"\\\\e917\";\n}\n.icon-Filters:before {\n  content: \"\\\\e918\";\n}\n.icon-expand_more:before {\n  content: \"\\\\e919\";\n}\n.icon-expand_less:before {\n  content: \"\\\\e91a\";\n}\n.icon-Empty:before {\n  content: \"\\\\e91b\";\n}\n.icon-edit:before {\n  content: \"\\\\e91c\";\n}\n.icon-drag_indicator:before {\n  content: \"\\\\e91d\";\n}\n.icon-download:before {\n  content: \"\\\\e91e\";\n}\n.icon-details:before {\n  content: \"\\\\e91f\";\n}\n.icon-delete:before {\n  content: \"\\\\e920\";\n}\n.icon-create_new_folder:before {\n  content: \"\\\\e921\";\n}\n.icon-chevron_right:before {\n  content: \"\\\\e923\";\n}\n.icon-chevron_left:before {\n  content: \"\\\\e924\";\n}\n.icon-heck_circle:before {\n  content: \"\\\\e925\";\n}\n.icon-carts:before {\n  content: \"\\\\e926\";\n}\n.icon-Callbacks:before {\n  content: \"\\\\e928\";\n}\n.icon-Annotations:before {\n  content: \"\\\\e929\";\n}\n.icon-add:before {\n  content: \"\\\\e92b\";\n}\n`;\nexport default Style;\n\nconst previousStyle = `\n.icon-AddGlobal:before {\n  content: \"\\\\e900\";\n}\n.icon-out:before {\n  content: \"\\\\e901\";\n}\n.icon-in:before {\n  content: \"\\\\e902\";\n}\n.icon-account_circle:before {\n  content: \"\\\\e903\";\n}\n.icon-data_setting:before {\n  content: \"\\\\e904\";\n}\n.icon-supervisor_account:before {\n  content: \"\\\\e905\";\n}\n.icon-add_box:before {\n  content: \"\\\\e906\";\n}\n.icon-time .path1:before {\n  content: \"\\\\e907\";\n  color: rgb(0, 178, 188);\n}\n.icon-time .path2:before {\n  content: \"\\\\e908\";\n  margin-left: -1em;\n  color: rgb(250, 250, 250);\n}\n.icon-carts .path1:before {\n  content: \"\\\\e909\";\n  color: rgb(0, 178, 188);\n}\n.icon-carts .path2:before {\n  content: \"\\\\e90a\";\n  margin-left: -1em;\n  color: rgb(250, 250, 250);\n}\n.icon-tree:before {\n  content: \"\\\\e90b\";\n}\n.icon-expand_more:before {\n  content: \"\\\\e90c\";\n}\n.icon-expand_less:before {\n  content: \"\\\\e90d\";\n}\n.icon-chevron_right:before {\n  content: \"\\\\e90e\";\n}\n.icon-chevron_left:before {\n  content: \"\\\\e90f\";\n}\n.icon-Statistics:before {\n  content: \"\\\\e910\";\n}\n.icon-Scenes:before {\n  content: \"\\\\e911\";\n}\n.icon-Sad:before {\n  content: \"\\\\e912\";\n}\n.icon-Normal:before {\n  content: \"\\\\e913\";\n}\n.icon-Nodes:before {\n  content: \"\\\\e914\";\n}\n.icon-Layouts:before {\n  content: \"\\\\e915\";\n}\n.icon-Happy:before {\n  content: \"\\\\e916\";\n}\n.icon-Flows:before {\n  content: \"\\\\e917\";\n}\n.icon-Filters:before {\n  content: \"\\\\e918\";\n}\n.icon-Empty:before {\n  content: \"\\\\e919\";\n}\n.icon-Callbacks:before {\n  content: \"\\\\e91a\";\n}\n.icon-Annotations:before {\n  content: \"\\\\e91b\";\n}\n.icon-create_new_folder:before {\n  content: \"\\\\e91c\";\n}\n.icon-widgets:before {\n  content: \"\\\\e91d\";\n}\n.icon-log:before {\n  content: \"\\\\e91e\";\n}\n.icon-outlined_hidden:before {\n  content: \"\\\\e91f\";\n}\n.icon-outlined:before {\n  content: \"\\\\e920\";\n}\n.icon-repeat:before {\n  content: \"\\\\e921\";\n  color: #2090b7;\n}\n.icon-edit:before {\n  content: \"\\\\e922\";\n  color: #2091b7;\n}\n.icon-download:before {\n  content: \"\\\\e923\";\n  color: #2091b7;\n}\n.icon-details:before {\n  content: \"\\\\e924\";\n}\n.icon-delete:before {\n  content: \"\\\\e925\";\n  color: #2091b7;\n}\n.icon-check_circle-copy:before {\n  content: \"\\\\e926\";\n}\n.icon-add:before {\n  content: \"\\\\e927\";\n  color: #2091b7;\n}\n.icon-drag_indicator-24px-3:before {\n  content: \"\\\\e928\";\n}\n`;\n","export default \"data:font/woff;base64,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\"","export default class UndoManager {\n  constructor(size = 50) {\n    this.size = size;\n    this.undoStack = new Queue(size);\n    this.redoStack = new Queue(size);\n  }\n\n  doIt(undoAbleAction) {\n    undoAbleAction.doAction();\n    this.undoStack.push(undoAbleAction);\n    this.redoStack = new Queue(this.size);\n  }\n\n  addIt(undoAbleAction) {\n    this.undoStack.push(undoAbleAction);\n    this.redoStack = new Queue(this.size);\n  }\n\n  undo(paramsObject) {\n    const undoAbleAction = this.undoStack.pop();\n    if (undoAbleAction) {\n      undoAbleAction.undoAction(paramsObject);\n      this.redoStack.push(undoAbleAction);\n    }\n  }\n\n  redo(paramsObject) {\n    const undoAbleAction = this.redoStack.pop();\n    if (undoAbleAction) {\n      undoAbleAction.doAction(paramsObject);\n      this.undoStack.push(undoAbleAction);\n    }\n  }\n\n  static actionBuilder() {\n    return new UndoAbleActionBuilder();\n  }\n}\n\nclass UndoAbleActionBuilder {\n  constructor() {\n    this._doAction = null;\n    this._undoAction = null;\n  }\n\n  doAction(lambda) {\n    this._doAction = lambda;\n    return this;\n  }\n\n  undoAction(lambda) {\n    this._undoAction = lambda;\n    return this;\n  }\n\n  build() {\n    if ([this._undoAction, this._undoAction].some(x => x == null))\n      throw \"Forgot to set doAction or undoAction\";\n    return { doAction: this._doAction, undoAction: this._undoAction };\n  }\n}\n\nclass Queue {\n  constructor(size = 50) {\n    this.size = size;\n    this.queue = [];\n  }\n\n  push(el) {\n    if (this.queue.length === this.size) {\n      this.queue.shift();\n    }\n    this.queue.push(el);\n  }\n\n  pop() {\n    return this.queue.pop();\n  }\n}\n","/**\n * Clipboard singleton\n */\nexport default class Clipboard {\n  constructor() {\n    if (Clipboard.instance) return Clipboard.instance;\n    Clipboard.instance = this;\n    this._data = {};\n    this.copyKey = Math.random();\n  }\n\n  /**\n   *  get clipboard data\n   */\n  get data() {\n    return this._data;\n  }\n\n  /**\n   *\n   * @param {string} key base key to clear\n   */\n  static clear(key) {\n    const inst = new Clipboard();\n    if (key) delete inst._data[key];\n  }\n\n  /**\n   *\n   * @param {string} key base key to read\n   */\n  static read(key) {\n    // consider return a maybe\n    const inst = new Clipboard();\n    return key ? inst.data[key] : inst.data;\n  }\n\n  /**\n   *\n   * @param {string} key base key to write\n   * @param {any} value object, primitive, etc, to write\n   */\n  static write(key, value) {\n    return (new Clipboard()._data[key] = value);\n  }\n\n  /**\n   * Copies value\n   * @param {*} value\n   */\n  static copy(value) {\n    Clipboard.write(new Clipboard().copyKey, value);\n  }\n\n  /**\n   * Retrieve copied object\n   */\n  static paste() {\n    // consider making deep copy\n    return Clipboard.read(new Clipboard().copyKey);\n  }\n}\n","import Authentication from \"../Authentication/Authentication\";\n\nclass User {\n  constructor() {\n    this.baseUrl = `${window.location.origin}/api/v1/User`;\n    this.tokenData = Authentication.getTokenData();\n    this.data = null;\n    this.timestamp = null;\n    this.TIMEOUT = 3000; // milisec\n  }\n\n  getData = () => {\n    const headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${Authentication.getToken()}`\n    };\n    const { name } = this.tokenData.message;\n    const url = `${this.baseUrl}/${name}/`;\n\n    return new Promise((resolve, reject) => {\n      const currTime = new Date().getTime();\n\n      // send cached value\n      if (currTime - this.timestamp <= this.TIMEOUT && this.data) {\n        return resolve({ response: this.data });\n      }\n\n      this.timestamp = currTime;\n\n      fetch(url, { headers })\n        .then(response => {\n          // request error\n          if (!response.ok) {\n            reject({ error: response.statusText });\n          }\n\n          // parse response\n          response\n            .json()\n            .then(data => {\n              this.data = data;\n              resolve({ response: data });\n            })\n            .catch(error => {\n              this.data = null;\n              reject({ error });\n            });\n        })\n        .catch(error => {\n          // error while parsing request\n          this.data = null;\n          reject({ error });\n        });\n    });\n  };\n\n  isSuperUser = async () => {\n    const data = await this.getData();\n    return data?.response?.Superuser || false;\n  };\n}\n\nexport default User;\n","import lodash from \"lodash\";\nimport { BehaviorSubject } from \"rxjs\";\n\nexport default class DataManagerBase {\n  constructor() {\n    this.models = {};\n    this.db_states = Object.freeze({ error: -1, loading: 0, ready: 1 });\n    this.isReady = 0;\n    this._subject_state = new BehaviorSubject(0);\n  }\n\n  _initialize = () => {\n    if (lodash.isEmpty(this.models)) {\n      throw new Error(\"No models added\");\n    }\n\n    Object.keys(this.models).forEach(key => {\n      const prop = key.charAt(0).toLowerCase() + key.slice(1);\n\n      Object.defineProperty(this, prop, {\n        get: () => {\n          return this.models[key];\n        }\n      });\n    });\n    return this._subscribeModelsReady();\n  };\n\n  _subscribeModelsReady = () => {\n    Object.keys(this.models).forEach(key => {\n      this.models[key].onReady(() => this._setModelReady(key));\n    });\n    return this;\n  };\n\n  _setModelReady = model => {\n    this.isReady += 1;\n    if (this.isReady === Object.keys(this.models).length) {\n      this._subject_state.complete();\n    }\n  };\n\n  get db_state() {\n    return this.isReady === Object.keys(this.models).length\n      ? this.db_states.ready\n      : this.db_states.loading;\n  }\n\n  onUpdate = (subscribeTo, callback) => {\n    return subscribeTo.onUpdate(callback);\n  };\n\n  onReady = callback => {\n    if (this.db_state !== this.db_states.ready) {\n      this._subject_state.subscribe(\n        () => {},\n        () => {},\n        () => callback()\n      );\n    } else {\n      callback();\n    }\n  };\n}\n","import Rest from \"../Rest/Rest\";\n\nconst Workspace = {};\n\nWorkspace.create = () => {\n  throw new Error(\"Not implemented\");\n};\nWorkspace.delete = () => {\n  throw new Error(\"Not implemented\");\n};\n\n/**\n * Get a list of all locally available workspaces\n */\nWorkspace.getAll = () => {\n  const path = \"v2/db\";\n\n  return Rest.get({ path });\n};\n\n/**\n * Get all existing documents in a workspace\n * @param {String} workspace - workspace to search\n * @param {String} type - filter documents by type\n * @param {String} id - further filter documents by type and id\n */\nWorkspace.getDocs = ({ workspace, scope, id }) => {\n  const _scope = scope ? `/${scope}` : \"\";\n  const _id = scope ? (id ? `/${id}` : \"\") : \"\";\n  const path = `v2/db/${workspace}${_scope}${_id}`;\n\n  return Rest.get({ path });\n};\n\nexport default Workspace;\n","import Rest from \"../Rest/Rest\";\n\nconst Snapshot = {};\n\n/**\n * Create a snapshot from a specific document\n * @param {Object} target Object with the following params\n * @param {Object} source Object with the following params\n *  @param {String} workspace Target workspace where the document will be\n *  @param {String} type Type of the document\n *  @param {String} name Source name of the document\n *  @param {String} version Source version of the snapshot\n */\nSnapshot._create = ({ target, body = {} }) => {\n  const { workspace, type, name, version } = target;\n\n  const path = `v2/db/${workspace}/${type}/${name}/${version}`;\n\n  return Rest.post({ path, body });\n};\n\n/**\n * Create a snapshot from a specific document\n * @param {Object} target Object with the following params\n *  @param {String} workspace Target workspace where the document will be\n *  @param {String} type Type of the document\n *  @param {String} name Source name of the document\n *  @param {String} version Source version of the snapshot\n * @param {Object} body Document data\n */\nSnapshot.create = ({ target, body = {} }) => {\n  Snapshot._create({ target, body: { data: body } });\n};\n\n/**\n * Create document by referencing an existing document\n * @param {Object} target Object with the following params\n * @param {Object} source Object with the following params\n *  @param {String} workspace Target workspace where the document will be\n *  @param {String} type Type of the document\n *  @param {String} name Source name of the document\n *  @param {String} version Source version of the snapshot\n */\nSnapshot.createByRef = ({ target, source }) => {\n  const body = {\n    src: `${source.workspace}/${source.type}/${source.name}/${source.version}`\n  };\n\n  return Snapshot._create({ target, source, body });\n};\n\n/**\n * Delete a specific snapshot\n */\nSnapshot.delete = () => {\n  throw new Error(\"Not implemented\");\n};\n\n/**\n * Get the data of a snapshot\n * @param {String} workspace Workspace to read from\n * @param {String} type Type of the document\n * @param {String} name Name of the snapshot\n * @param {String} version Version of the snapshot\n */\nSnapshot.read = ({ workspace, type, name, version }) => {\n  const path = `v2/db/${workspace}/${type}/${name}/${version}`;\n\n  return Rest.get({ path });\n};\n\n/**\n * Create document in the global workspace\n * @param {Object} target Object with the following params\n * @param {Object} source Object with the following params\n *  @param {String} workspace Target workspace where the document will be\n *  @param {String} type Type of the document\n *  @param {String} name Source name of the document\n *  @param {String} version Source version of the snapshot\n */\nSnapshot.restore = ({ target, source }) => {\n  target.workspace = \"global\";\n\n  return Snapshot.createByRef({ target, source });\n};\n\n/**\n * Get all the snapshots of a document\n * @param {String} workspace Workspace to read from\n * @param {String} type Type of the document\n * @param {String} name Name of the document\n */\nSnapshot.getAll = ({ workspace, type, name }) => {\n  const path = `v2/db/${workspace}/${type}/${name}`;\n\n  return Rest.get({ path });\n};\n\nexport default Snapshot;\n"],"sourceRoot":""}